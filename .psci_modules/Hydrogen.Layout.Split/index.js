// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                          // hydrogen // split
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Split pane layout component
// |
// | Resizable split panes for editor layouts, IDE panels,
// | and adjustable content areas.
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Layout.Split as Split
// |
// | -- Horizontal split (side by side)
// | Split.split [ Split.direction Split.Horizontal ]
// |   { primary: leftPanel, secondary: rightPanel }
// |
// | -- Vertical split (top/bottom)
// | Split.split [ Split.direction Split.Vertical ]
// |   { primary: topPanel, secondary: bottomPanel }
// |
// | -- With size constraints
// | Split.split
// |   [ Split.direction Split.Horizontal
// |   , Split.initialSize 30  -- 30%
// |   , Split.minSize 20
// |   , Split.maxSize 80
// |   ]
// |   { primary: sidebar, secondary: main }
// |
// | -- Collapsible
// | Split.split
// |   [ Split.collapsible true
// |   , Split.collapsed false
// |   , Split.onCollapse \isCollapsed -> ...
// |   ]
// |   { primary: panel, secondary: content }
// | ```
import * as $foreign from "./foreign.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Effect_Uncurried from "../Effect.Uncurried/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showNumber);
var show1 = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // direction
// ═══════════════════════════════════════════════════════════════════════════════
// | Split direction
var Horizontal = /* #__PURE__ */ (function () {
    function Horizontal() {

    };
    Horizontal.value = new Horizontal();
    return Horizontal;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // direction
// ═══════════════════════════════════════════════════════════════════════════════
// | Split direction
var Vertical = /* #__PURE__ */ (function () {
    function Vertical() {

    };
    Vertical.value = new Vertical();
    return Vertical;
})();

// | Hook for split initialization
var useSplit = /* #__PURE__ */ Effect_Uncurried.runEffectFn1($foreign.initSplit);

// | Individual split pane wrapper
// |
// | Use this for more control over individual panes within a split layout.
var splitPane = function (extraClass) {
    return function (children) {
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "h-full w-full overflow-auto", extraClass ]) ])(children);
    };
};

// | Set pane sizes
var setSizes = /* #__PURE__ */ Effect_Uncurried.runEffectFn2($foreign.setSizesImpl);

// | Set persistence key
var persistKey = function (k) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            persistKey: k
        };
    };
};

// | Enable persistence to localStorage
var persist = function (p) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            persist: p
        };
    };
};

// | Handle resize events
var onResize = function (f) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onCollapse: props.onCollapse,
            className: props.className,
            onResize: new Data_Maybe.Just(f)
        };
    };
};

// | Handle collapse events
var onCollapse = function (f) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            className: props.className,
            onCollapse: new Data_Maybe.Just(f)
        };
    };
};

// | Set minimum size (percentage)
var minSize = function (s) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            minSize: s
        };
    };
};

// | Set maximum size (percentage)
var maxSize = function (s) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            maxSize: s
        };
    };
};

// | Set initial size (percentage)
var initialSize = function (s) {
    return function (props) {
        return {
            direction: props.direction,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            initialSize: s
        };
    };
};

// | Set gutter size in pixels
var gutterSize = function (s) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            gutterSize: s
        };
    };
};

// | Get current sizes
var getSizes = /* #__PURE__ */ Effect_Uncurried.runEffectFn1($foreign.getSizesImpl);

// | Expand primary pane
var expand = /* #__PURE__ */ Effect_Uncurried.runEffectFn1($foreign.expandImpl);
var eqDirection = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Horizontal && y instanceof Horizontal) {
                return true;
            };
            if (x instanceof Vertical && y instanceof Vertical) {
                return true;
            };
            return false;
        };
    }
};
var eq = /* #__PURE__ */ Data_Eq.eq(eqDirection);
var directionClass = function (v) {
    if (v instanceof Horizontal) {
        return "flex-row";
    };
    if (v instanceof Vertical) {
        return "flex-col";
    };
    throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 93, column 18 - line 95, column 25): " + [ v.constructor.name ]);
};

// | Set split direction
var direction = function (d) {
    return function (props) {
        return {
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            direction: d
        };
    };
};
var defaultProps = /* #__PURE__ */ (function () {
    return {
        direction: Horizontal.value,
        initialSize: 50.0,
        minSize: 10.0,
        maxSize: 90.0,
        collapsible: false,
        collapsed: false,
        gutterSize: 4,
        persist: false,
        persistKey: "split-sizes",
        onResize: Data_Maybe.Nothing.value,
        onCollapse: Data_Maybe.Nothing.value,
        className: ""
    };
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // components
// ═══════════════════════════════════════════════════════════════════════════════
// | Split pane container
// |
// | Provides a resizable split layout with draggable divider.
// | Supports horizontal and vertical orientations, min/max constraints,
// | and optional persistence of sizes.
var split = function (propMods) {
    return function (panes) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        var primarySize = (function () {
            if (props.collapsed) {
                return 0.0;
            };
            return props.initialSize;
        })();
        var primaryStyle = (function () {
            if (props.direction instanceof Horizontal) {
                return "width: " + (show(primarySize) + "%");
            };
            if (props.direction instanceof Vertical) {
                return "height: " + (show(primarySize) + "%");
            };
            throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 255, column 20 - line 257, column 56): " + [ props.direction.constructor.name ]);
        })();
        var secondarySize = 100.0 - primarySize;
        var secondaryStyle = (function () {
            if (props.direction instanceof Horizontal) {
                return "width: " + (show(secondarySize) + "%");
            };
            if (props.direction instanceof Vertical) {
                return "height: " + (show(secondarySize) + "%");
            };
            throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 259, column 22 - line 261, column 58): " + [ props.direction.constructor.name ]);
        })();
        var gutterOrientation = (function () {
            if (props.direction instanceof Horizontal) {
                return "w-[" + (show1(props.gutterSize) + "px] h-full");
            };
            if (props.direction instanceof Vertical) {
                return "h-[" + (show1(props.gutterSize) + "px] w-full");
            };
            throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 251, column 25 - line 253, column 65): " + [ props.direction.constructor.name ]);
        })();
        var gutterCursor = (function () {
            if (props.direction instanceof Horizontal) {
                return "cursor-col-resize";
            };
            if (props.direction instanceof Vertical) {
                return "cursor-row-resize";
            };
            throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 247, column 20 - line 249, column 38): " + [ props.direction.constructor.name ]);
        })();
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex h-full w-full", directionClass(props.direction), props.className ]), Halogen_HTML_Properties.attr("data-split")("true"), Halogen_HTML_Properties.attr("data-direction")((function () {
            var $28 = eq(props.direction)(Horizontal.value);
            if ($28) {
                return "horizontal";
            };
            return "vertical";
        })()), Halogen_HTML_Properties.attr("data-min-size")(show(props.minSize)), Halogen_HTML_Properties.attr("data-max-size")(show(props.maxSize)), Halogen_HTML_Properties.attr("data-persist")((function () {
            if (props.persist) {
                return props.persistKey;
            };
            return "";
        })()) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "overflow-auto shrink-0" ]), Halogen_HTML_Properties.style(primaryStyle), Halogen_HTML_Properties.attr("data-split-pane")("primary") ])([ panes.primary ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center justify-center shrink-0 bg-border hover:bg-primary/20 transition-colors select-none", gutterCursor, gutterOrientation ]), Halogen_HTML_Properties.attr("data-split-gutter")("true") ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ (function () {
            if (props.direction instanceof Horizontal) {
                return "w-0.5 h-8 rounded-full bg-muted-foreground/40";
            };
            if (props.direction instanceof Vertical) {
                return "h-0.5 w-8 rounded-full bg-muted-foreground/40";
            };
            throw new Error("Failed pattern match at Hydrogen.Layout.Split (line 286, column 23 - line 288, column 84): " + [ props.direction.constructor.name ]);
        })() ]) ])([  ]) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "overflow-auto flex-1 min-w-0 min-h-0" ]), Halogen_HTML_Properties.style(secondaryStyle), Halogen_HTML_Properties.attr("data-split-pane")("secondary") ])([ panes.secondary ]) ]);
    };
};

// | Enable collapsible pane
var collapsible = function (c) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            collapsible: c
        };
    };
};

// | Set collapsed state
var collapsed = function (c) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className,
            collapsed: c
        };
    };
};

// | Collapse primary pane
var collapse = /* #__PURE__ */ Effect_Uncurried.runEffectFn1($foreign.collapseImpl);

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            direction: props.direction,
            initialSize: props.initialSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            gutterSize: props.gutterSize,
            persist: props.persist,
            persistKey: props.persistKey,
            onResize: props.onResize,
            onCollapse: props.onCollapse,
            className: props.className + (" " + c)
        };
    };
};
export {
    split,
    splitPane,
    direction,
    initialSize,
    minSize,
    maxSize,
    collapsible,
    collapsed,
    gutterSize,
    persist,
    persistKey,
    onResize,
    onCollapse,
    className,
    Horizontal,
    Vertical,
    useSplit,
    setSizes,
    collapse,
    expand,
    getSizes,
    eqDirection
};
