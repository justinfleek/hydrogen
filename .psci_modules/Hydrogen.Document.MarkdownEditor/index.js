// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                  // hydrogen // markdowneditor
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Markdown Editor with Live Preview
// |
// | A feature-rich Markdown editor with split view, live preview,
// | syntax highlighting, and GitHub Flavored Markdown support.
// |
// | ## Features
// |
// | - Split view (editor | preview)
// | - Live preview as you type
// | - Toolbar for common formatting
// | - Syntax highlighting in editor
// | - GFM (GitHub Flavored Markdown) support
// | - Tables with easy editing
// | - Task lists (checkboxes)
// | - Code blocks with language highlighting
// | - Math equations (KaTeX)
// | - Mermaid diagrams
// | - Image upload/paste
// | - Link insertion
// | - Fullscreen editing
// | - Preview-only mode
// | - Editor-only mode
// | - Word/character count
// | - Export to HTML
// | - Custom renderers for extensions
// | - Vim/Emacs key bindings (optional)
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Document.MarkdownEditor as MarkdownEditor
// |
// | -- Basic editor
// | MarkdownEditor.markdownEditor
// |   [ MarkdownEditor.value content
// |   , MarkdownEditor.onChange HandleChange
// |   , MarkdownEditor.showToolbar true
// |   ]
// |
// | -- With GFM and extensions
// | MarkdownEditor.markdownEditor
// |   [ MarkdownEditor.value content
// |   , MarkdownEditor.onChange HandleChange
// |   , MarkdownEditor.gfm true
// |   , MarkdownEditor.enableMath true
// |   , MarkdownEditor.enableMermaid true
// |   ]
// |
// | -- Preview only
// | MarkdownEditor.markdownEditor
// |   [ MarkdownEditor.value content
// |   , MarkdownEditor.viewMode MarkdownEditor.PreviewOnly
// |   ]
// | ```
import * as $foreign from "./foreign.js";
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as Control_Category from "../Control.Category/index.js";
import * as DOM_HTML_Indexed_ButtonType from "../DOM.HTML.Indexed.ButtonType/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_String_CodePoints from "../Data.String.CodePoints/index.js";
import * as Data_String_CodeUnits from "../Data.String.CodeUnits/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect from "../Effect/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect.applicativeEffect);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var append1 = /* #__PURE__ */ Data_Semigroup.append(Data_Semigroup.semigroupArray);
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var value1 = /* #__PURE__ */ Halogen_HTML_Properties.value(Halogen_HTML_Core.isPropString);
var type_ = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropButtonType);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Editor view mode
var SplitView = /* #__PURE__ */ (function () {
    function SplitView() {

    };
    SplitView.value = new SplitView();
    return SplitView;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Editor view mode
var EditorOnly = /* #__PURE__ */ (function () {
    function EditorOnly() {

    };
    EditorOnly.value = new EditorOnly();
    return EditorOnly;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Editor view mode
var PreviewOnly = /* #__PURE__ */ (function () {
    function PreviewOnly() {

    };
    PreviewOnly.value = new PreviewOnly();
    return PreviewOnly;
})();

// | Toolbar actions
var Bold = /* #__PURE__ */ (function () {
    function Bold() {

    };
    Bold.value = new Bold();
    return Bold;
})();

// | Toolbar actions
var Italic = /* #__PURE__ */ (function () {
    function Italic() {

    };
    Italic.value = new Italic();
    return Italic;
})();

// | Toolbar actions
var Strikethrough = /* #__PURE__ */ (function () {
    function Strikethrough() {

    };
    Strikethrough.value = new Strikethrough();
    return Strikethrough;
})();

// | Toolbar actions
var Heading1 = /* #__PURE__ */ (function () {
    function Heading1() {

    };
    Heading1.value = new Heading1();
    return Heading1;
})();

// | Toolbar actions
var Heading2 = /* #__PURE__ */ (function () {
    function Heading2() {

    };
    Heading2.value = new Heading2();
    return Heading2;
})();

// | Toolbar actions
var Heading3 = /* #__PURE__ */ (function () {
    function Heading3() {

    };
    Heading3.value = new Heading3();
    return Heading3;
})();

// | Toolbar actions
var BulletList = /* #__PURE__ */ (function () {
    function BulletList() {

    };
    BulletList.value = new BulletList();
    return BulletList;
})();

// | Toolbar actions
var NumberedList = /* #__PURE__ */ (function () {
    function NumberedList() {

    };
    NumberedList.value = new NumberedList();
    return NumberedList;
})();

// | Toolbar actions
var TaskList = /* #__PURE__ */ (function () {
    function TaskList() {

    };
    TaskList.value = new TaskList();
    return TaskList;
})();

// | Toolbar actions
var Blockquote = /* #__PURE__ */ (function () {
    function Blockquote() {

    };
    Blockquote.value = new Blockquote();
    return Blockquote;
})();

// | Toolbar actions
var CodeBlock = /* #__PURE__ */ (function () {
    function CodeBlock() {

    };
    CodeBlock.value = new CodeBlock();
    return CodeBlock;
})();

// | Toolbar actions
var InlineCode = /* #__PURE__ */ (function () {
    function InlineCode() {

    };
    InlineCode.value = new InlineCode();
    return InlineCode;
})();

// | Toolbar actions
var Link = /* #__PURE__ */ (function () {
    function Link() {

    };
    Link.value = new Link();
    return Link;
})();

// | Toolbar actions
var Image = /* #__PURE__ */ (function () {
    function Image() {

    };
    Image.value = new Image();
    return Image;
})();

// | Toolbar actions
var Table = /* #__PURE__ */ (function () {
    function Table() {

    };
    Table.value = new Table();
    return Table;
})();

// | Toolbar actions
var HorizontalRule = /* #__PURE__ */ (function () {
    function HorizontalRule() {

    };
    HorizontalRule.value = new HorizontalRule();
    return HorizontalRule;
})();

// | Toolbar actions
var Undo = /* #__PURE__ */ (function () {
    function Undo() {

    };
    Undo.value = new Undo();
    return Undo;
})();

// | Toolbar actions
var Redo = /* #__PURE__ */ (function () {
    function Redo() {

    };
    Redo.value = new Redo();
    return Redo;
})();

// | Key binding mode
var Default = /* #__PURE__ */ (function () {
    function Default() {

    };
    Default.value = new Default();
    return Default;
})();

// | Key binding mode
var Vim = /* #__PURE__ */ (function () {
    function Vim() {

    };
    Vim.value = new Vim();
    return Vim;
})();

// | Key binding mode
var Emacs = /* #__PURE__ */ (function () {
    function Emacs() {

    };
    Emacs.value = new Emacs();
    return Emacs;
})();

// | Wrap selection
var wrapSelection = function (v) {
    return function (v1) {
        return function (v2) {
            return pure(Data_Unit.unit);
        };
    };
};

// | Enable/disable word wrap
var wordWrap = function (w) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            wordWrap: w
        };
    };
};

// | Set view mode
var viewMode = function (m) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            viewMode: m
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                               // prop builders
// ═══════════════════════════════════════════════════════════════════════════════
// | Set markdown content
var value = function (v) {
    return function (props) {
        return {
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            value: v
        };
    };
};
var taskIcon = "T";
var tableIcon = "#";

// | Set tab size
var tabSize = function (t) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            tabSize: t
        };
    };
};

// | Enable syntax highlighting
var syntaxHighlight = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            syntaxHighlight: s
        };
    };
};
var splitIcon = "|";

// | Enable/disable spell check
var spellCheck = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            spellCheck: s
        };
    };
};

// | Show/hide toolbar
var showToolbar = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            showToolbar: s
        };
    };
};

// | Show/hide status bar
var showStatusBar = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            showStatusBar: s
        };
    };
};

// | Set selection
var setSelection = function (v) {
    return function (v1) {
        return function (v2) {
            return pure(Data_Unit.unit);
        };
    };
};

// | Scroll to line
var scrollToLine = function (v) {
    return function (v1) {
        return pure(Data_Unit.unit);
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                               // status bar
// ═══════════════════════════════════════════════════════════════════════════════
// | Render status bar
var renderStatusBar = function (props) {
    return function (stats) {
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "markdown-status-bar flex items-center justify-between px-3 py-1.5 border-t border-border bg-muted/30 text-xs text-muted-foreground" ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center gap-4" ]) ])([ Halogen_HTML_Elements.span([  ])([ Halogen_HTML_Core.text(show(stats.words) + " words") ]), Halogen_HTML_Elements.span([  ])([ Halogen_HTML_Core.text(show(stats.characters) + " characters") ]), Halogen_HTML_Elements.span([  ])([ Halogen_HTML_Core.text(show(stats.lines) + " lines") ]) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center gap-3" ]) ])([ (function () {
            if (props.gfm) {
                return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "px-1.5 py-0.5 rounded bg-muted" ]) ])([ Halogen_HTML_Core.text("GFM") ]);
            };
            return Halogen_HTML_Core.text("");
        })(), (function () {
            if (props.enableMath) {
                return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "px-1.5 py-0.5 rounded bg-muted" ]) ])([ Halogen_HTML_Core.text("Math") ]);
            };
            return Halogen_HTML_Core.text("");
        })(), (function () {
            if (props.keyBindings instanceof Vim) {
                return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "px-1.5 py-0.5 rounded bg-muted" ]) ])([ Halogen_HTML_Core.text("Vim") ]);
            };
            if (props.keyBindings instanceof Emacs) {
                return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "px-1.5 py-0.5 rounded bg-muted" ]) ])([ Halogen_HTML_Core.text("Emacs") ]);
            };
            if (props.keyBindings instanceof Default) {
                return Halogen_HTML_Core.text("");
            };
            throw new Error("Failed pattern match at Hydrogen.Document.MarkdownEditor (line 706, column 11 - line 709, column 34): " + [ props.keyBindings.constructor.name ]);
        })() ]) ]);
    };
};

// | Render preview content (simplified)
var renderPreviewContent = function (props) {
    return Halogen_HTML_Elements.div([  ])([ Halogen_HTML_Core.text(props.value) ]);
};

// | Render Markdown to HTML (pure, for preview)
var renderMarkdownToHtml = /* #__PURE__ */ Control_Category.identity(Control_Category.categoryFn);

// | Render Markdown to HTML string
var renderMarkdown = function (content) {
    return function (v) {
        return pure(content);
    };
};

// | Set read-only mode
var readOnly = function (r) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            readOnly: r
        };
    };
};

// | Generate array range
var rangeArray = function (start) {
    return function (end) {
        return $foreign.rangeArrayImpl(start)(end);
    };
};
var quoteIcon = ">";
var previewIcon = "V";

// | Set placeholder text
var placeholder = function (p) {
    return function (props) {
        return {
            value: props.value,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            placeholder: p
        };
    };
};

// | Handle save (Ctrl+S)
var onSave = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onFullscreenChange: props.onFullscreenChange,
            onSave: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle link insertion
var onLinkInsert = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            onLinkInsert: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle image upload
var onImageUpload = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            onImageUpload: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle fullscreen change
var onFullscreenChange = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle content change
var onChange = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            onChange: new Data_Maybe.Just(handler)
        };
    };
};
var numberIcon = "1";

// | Set minimum height
var minHeight = function (h) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            minHeight: h
        };
    };
};

// | Set maximum height
var maxHeight = function (h) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            maxHeight: h
        };
    };
};

// | Standalone Markdown preview component
var markdownPreview = function (content) {
    return function (extraClasses) {
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls(append1([ "markdown-preview prose prose-sm dark:prose-invert max-w-none p-4" ])(extraClasses)) ])([ Halogen_HTML_Core.text(content) ]);
    };
};
var linkIcon = "@";

// | Show/hide line numbers
var lineNumbers = function (l) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            lineNumbers: l
        };
    };
};

// | Set key binding mode
var keyBindings = function (k) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            keyBindings: k
        };
    };
};

// | Insert text at cursor
var insertText = function (v) {
    return function (v1) {
        return pure(Data_Unit.unit);
    };
};
var inlineCodeIcon = "`";

// | Initialize editor
var initEditor = function (v) {
    return function (v1) {
        return pure($foreign.unsafeEditorHandle);
    };
};
var imageIcon = "P";
var hrIcon = "-";

// | Enable GitHub Flavored Markdown
var gfm = function (g) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            gfm: g
        };
    };
};

// | Get selection
var getSelection = function (v) {
    return pure({
        start: 0,
        end: 0,
        text: ""
    });
};
var fullscreenIcon = "F";

// | Focus editor
var focus = function (v) {
    return pure(Data_Unit.unit);
};
var eqViewMode = {
    eq: function (x) {
        return function (y) {
            if (x instanceof SplitView && y instanceof SplitView) {
                return true;
            };
            if (x instanceof EditorOnly && y instanceof EditorOnly) {
                return true;
            };
            if (x instanceof PreviewOnly && y instanceof PreviewOnly) {
                return true;
            };
            return false;
        };
    }
};
var eq2 = /* #__PURE__ */ Data_Eq.eq(eqViewMode);
var notEq = /* #__PURE__ */ Data_Eq.notEq(eqViewMode);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                              // preview pane
// ═══════════════════════════════════════════════════════════════════════════════
// | Render preview pane
var renderPreviewPane = function (props) {
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "markdown-preview-pane flex-1 overflow-auto", (function () {
        var $71 = eq2(props.viewMode)(SplitView.value);
        if ($71) {
            return "w-1/2";
        };
        return "w-full";
    })() ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "prose prose-sm dark:prose-invert max-w-none p-4" ]), Halogen_HTML_Properties.attr("data-markdown-preview")("true") ])([ (function () {
        var $72 = Data_String_CodePoints.length(props.value) > 0;
        if ($72) {
            return renderPreviewContent(props);
        };
        return Halogen_HTML_Elements.p([ Hydrogen_UI_Core.cls([ "text-muted-foreground italic" ]) ])([ Halogen_HTML_Core.text("Preview will appear here...") ]);
    })() ]) ]);
};
var eqToolbarAction = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Bold && y instanceof Bold) {
                return true;
            };
            if (x instanceof Italic && y instanceof Italic) {
                return true;
            };
            if (x instanceof Strikethrough && y instanceof Strikethrough) {
                return true;
            };
            if (x instanceof Heading1 && y instanceof Heading1) {
                return true;
            };
            if (x instanceof Heading2 && y instanceof Heading2) {
                return true;
            };
            if (x instanceof Heading3 && y instanceof Heading3) {
                return true;
            };
            if (x instanceof BulletList && y instanceof BulletList) {
                return true;
            };
            if (x instanceof NumberedList && y instanceof NumberedList) {
                return true;
            };
            if (x instanceof TaskList && y instanceof TaskList) {
                return true;
            };
            if (x instanceof Blockquote && y instanceof Blockquote) {
                return true;
            };
            if (x instanceof CodeBlock && y instanceof CodeBlock) {
                return true;
            };
            if (x instanceof InlineCode && y instanceof InlineCode) {
                return true;
            };
            if (x instanceof Link && y instanceof Link) {
                return true;
            };
            if (x instanceof Image && y instanceof Image) {
                return true;
            };
            if (x instanceof Table && y instanceof Table) {
                return true;
            };
            if (x instanceof HorizontalRule && y instanceof HorizontalRule) {
                return true;
            };
            if (x instanceof Undo && y instanceof Undo) {
                return true;
            };
            if (x instanceof Redo && y instanceof Redo) {
                return true;
            };
            return false;
        };
    }
};
var eqKeyBindings = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Default && y instanceof Default) {
                return true;
            };
            if (x instanceof Vim && y instanceof Vim) {
                return true;
            };
            if (x instanceof Emacs && y instanceof Emacs) {
                return true;
            };
            return false;
        };
    }
};

// | Enable Mermaid diagrams
var enableMermaid = function (m) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            enableMermaid: m
        };
    };
};

// | Enable math equations (KaTeX)
var enableMath = function (m) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            enableMath: m
        };
    };
};
var editorIcon = "E";

// | Destroy editor
var destroyEditor = function (v) {
    return pure(Data_Unit.unit);
};

// | Default properties
var defaultProps = /* #__PURE__ */ (function () {
    return {
        value: "",
        placeholder: "Write your markdown here...",
        viewMode: SplitView.value,
        showToolbar: true,
        showStatusBar: true,
        gfm: true,
        enableMath: false,
        enableMermaid: false,
        syntaxHighlight: true,
        keyBindings: Default.value,
        tabSize: 2,
        lineNumbers: false,
        wordWrap: true,
        spellCheck: true,
        autoFocus: false,
        readOnly: false,
        minHeight: "400px",
        maxHeight: "none",
        isFullscreen: false,
        className: "",
        onChange: Data_Maybe.Nothing.value,
        onImageUpload: Data_Maybe.Nothing.value,
        onLinkInsert: Data_Maybe.Nothing.value,
        onSave: Data_Maybe.Nothing.value,
        onFullscreenChange: Data_Maybe.Nothing.value
    };
})();

// | Count words in text
var countWords = function (content) {
    var chars = Data_String_CodeUnits.toCharArray(content);
    var trimmed = Data_Array.foldl(function (acc) {
        return function (c) {
            var $77 = c === " " || (c === "\x0a" || c === "\x09");
            if ($77) {
                return acc;
            };
            return append1(acc)([ c ]);
        };
    })([  ])(chars);
    var $78 = Data_Array.length(trimmed) === 0;
    if ($78) {
        return 0;
    };
    return $foreign.countWordsImpl(content);
};

// | Count paragraphs in text
var countParagraphs = function (v) {
    return 1;
};

// | Count lines in text
var countLines = function (content) {
    var chars = Data_String_CodeUnits.toCharArray(content);
    var count = Data_Array.foldl(function (acc) {
        return function (c) {
            var $79 = c === "\x0a";
            if ($79) {
                return acc + 1 | 0;
            };
            return acc;
        };
    })(0)(chars);
    return count + 1 | 0;
};

// | Render line numbers
var renderLineNumbers = function (props) {
    var lineCount = countLines(props.value);
    var numbers = map(show)(rangeArray(1)(lineCount));
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute left-0 top-0 bottom-0 w-10 bg-muted/30 border-r border-border text-right pr-2 py-4 select-none overflow-hidden" ]), Halogen_HTML_Properties_ARIA.hidden("true") ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "font-mono text-sm text-muted-foreground leading-relaxed" ]) ])(map(function (n) {
        return Halogen_HTML_Elements.div([  ])([ Halogen_HTML_Core.text(n) ]);
    })(numbers)) ]);
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                               // editor pane
// ═══════════════════════════════════════════════════════════════════════════════
// | Render editor pane
var renderEditorPane = function (props) {
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "markdown-editor-pane flex-1 flex flex-col overflow-hidden", (function () {
        var $80 = eq2(props.viewMode)(SplitView.value);
        if ($80) {
            return "w-1/2";
        };
        return "w-full";
    })() ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative flex-1 overflow-hidden" ]) ])([ (function () {
        if (props.lineNumbers) {
            return renderLineNumbers(props);
        };
        return Halogen_HTML_Core.text("");
    })(), Halogen_HTML_Elements.textarea([ Hydrogen_UI_Core.cls([ "w-full h-full resize-none p-4 bg-transparent font-mono text-sm leading-relaxed", "focus:outline-none", (function () {
        if (props.lineNumbers) {
            return "pl-12";
        };
        return "";
    })(), (function () {
        if (props.wordWrap) {
            return "";
        };
        return "whitespace-pre overflow-x-auto";
    })() ]), value1(props.value), Halogen_HTML_Properties.placeholder(props.placeholder), Halogen_HTML_Properties.readOnly(props.readOnly), Halogen_HTML_Properties.attr("spellcheck")((function () {
        if (props.spellCheck) {
            return "true";
        };
        return "false";
    })()), Halogen_HTML_Properties.attr("data-markdown-textarea")("true"), Halogen_HTML_Properties_ARIA.label("Markdown editor") ]) ]) ]);
};
var codeIcon = "{}";

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            autoFocus: props.autoFocus,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            className: props.className + (" " + c)
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                    // helpers
// ═══════════════════════════════════════════════════════════════════════════════
// | Calculate editor statistics
var calculateStats = function (content) {
    return {
        characters: Data_String_CodePoints.length(content),
        words: countWords(content),
        lines: countLines(content),
        paragraphs: countParagraphs(content)
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // icons
// ═══════════════════════════════════════════════════════════════════════════════
var bulletIcon = "L";

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                    // toolbar
// ═══════════════════════════════════════════════════════════════════════════════
// | Render toolbar
var renderToolbar = function (props) {
    var viewModeButton = function (v) {
        return function (label) {
            return function (icon) {
                return function (isActive) {
                    return Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ "inline-flex items-center justify-center h-8 px-2 rounded transition-colors text-sm", (function () {
                        if (isActive) {
                            return "bg-muted";
                        };
                        return "hover:bg-muted";
                    })() ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Halogen_HTML_Properties.title(label), Halogen_HTML_Properties_ARIA.label(label) ])([ Halogen_HTML_Core.text(icon) ]);
                };
            };
        };
    };
    var toolbarGroup = function (items) {
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center" ]) ])(items);
    };
    var toolbarButton = function (v) {
        return function (label) {
            return function (icon) {
                return function (extraClass) {
                    return Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ "inline-flex items-center justify-center h-8 w-8 rounded hover:bg-muted transition-colors text-sm", extraClass ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Halogen_HTML_Properties.title(label), Halogen_HTML_Properties_ARIA.label(label), Halogen_HTML_Properties.disabled(props.readOnly) ])([ Halogen_HTML_Core.text(icon) ]);
                };
            };
        };
    };
    var divider = Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-px h-6 bg-border mx-1" ]) ])([  ]);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "markdown-toolbar flex flex-wrap items-center gap-1 px-2 py-1.5 border-b border-border bg-muted/30" ]), Halogen_HTML_Properties_ARIA.role("toolbar"), Halogen_HTML_Properties_ARIA.label("Formatting toolbar") ])([ toolbarGroup([ toolbarButton(Bold.value)("Bold")("B")("font-bold"), toolbarButton(Italic.value)("Italic")("I")("italic"), toolbarButton(Strikethrough.value)("Strikethrough")("S")("line-through") ]), divider, toolbarGroup([ toolbarButton(Heading1.value)("Heading 1")("H1")(""), toolbarButton(Heading2.value)("Heading 2")("H2")(""), toolbarButton(Heading3.value)("Heading 3")("H3")("") ]), divider, toolbarGroup([ toolbarButton(BulletList.value)("Bullet List")(bulletIcon)(""), toolbarButton(NumberedList.value)("Numbered List")(numberIcon)(""), toolbarButton(TaskList.value)("Task List")(taskIcon)("") ]), divider, toolbarGroup([ toolbarButton(Blockquote.value)("Quote")(quoteIcon)(""), toolbarButton(CodeBlock.value)("Code Block")(codeIcon)(""), toolbarButton(InlineCode.value)("Inline Code")(inlineCodeIcon)("") ]), divider, toolbarGroup([ toolbarButton(Link.value)("Insert Link")(linkIcon)(""), toolbarButton(Image.value)("Insert Image")(imageIcon)(""), toolbarButton(Table.value)("Insert Table")(tableIcon)(""), toolbarButton(HorizontalRule.value)("Horizontal Rule")(hrIcon)("") ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex-1" ]) ])([  ]), toolbarGroup([ viewModeButton(EditorOnly.value)("Editor")(editorIcon)(eq2(props.viewMode)(EditorOnly.value)), viewModeButton(SplitView.value)("Split")(splitIcon)(eq2(props.viewMode)(SplitView.value)), viewModeButton(PreviewOnly.value)("Preview")(previewIcon)(eq2(props.viewMode)(PreviewOnly.value)) ]), divider, toolbarButton(Bold.value)("Fullscreen")(fullscreenIcon)("") ]);
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // components
// ═══════════════════════════════════════════════════════════════════════════════
// | Markdown Editor component
// |
// | Full-featured markdown editor with live preview, toolbar,
// | and support for GFM, math, and diagrams.
var markdownEditor = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultProps)(propMods);
    var stats = calculateStats(props.value);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "markdown-editor flex flex-col border border-border rounded-lg bg-background overflow-hidden", (function () {
        if (props.isFullscreen) {
            return "fixed inset-0 z-50";
        };
        return "";
    })(), props.className ]), Halogen_HTML_Properties.attr("data-markdown-editor")("true"), Halogen_HTML_Properties.attr("style")("min-height: " + (props.minHeight + ("; max-height: " + (props.maxHeight + ";")))) ])([ (function () {
        var $87 = props.showToolbar && notEq(props.viewMode)(PreviewOnly.value);
        if ($87) {
            return renderToolbar(props);
        };
        return Halogen_HTML_Core.text("");
    })(), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex flex-1 overflow-hidden" ]) ])((function () {
        if (props.viewMode instanceof SplitView) {
            return [ renderEditorPane(props), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-px bg-border" ]) ])([  ]), renderPreviewPane(props) ];
        };
        if (props.viewMode instanceof EditorOnly) {
            return [ renderEditorPane(props) ];
        };
        if (props.viewMode instanceof PreviewOnly) {
            return [ renderPreviewPane(props) ];
        };
        throw new Error("Failed pattern match at Hydrogen.Document.MarkdownEditor (line 486, column 12 - line 495, column 42): " + [ props.viewMode.constructor.name ]);
    })()), (function () {
        if (props.showStatusBar) {
            return renderStatusBar(props)(stats);
        };
        return Halogen_HTML_Core.text("");
    })() ]);
};

// | Blur editor
var blur = function (v) {
    return pure(Data_Unit.unit);
};

// | Auto-focus on mount
var autoFocus = function (a) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            viewMode: props.viewMode,
            showToolbar: props.showToolbar,
            showStatusBar: props.showStatusBar,
            gfm: props.gfm,
            enableMath: props.enableMath,
            enableMermaid: props.enableMermaid,
            syntaxHighlight: props.syntaxHighlight,
            keyBindings: props.keyBindings,
            tabSize: props.tabSize,
            lineNumbers: props.lineNumbers,
            wordWrap: props.wordWrap,
            spellCheck: props.spellCheck,
            readOnly: props.readOnly,
            minHeight: props.minHeight,
            maxHeight: props.maxHeight,
            isFullscreen: props.isFullscreen,
            className: props.className,
            onChange: props.onChange,
            onImageUpload: props.onImageUpload,
            onLinkInsert: props.onLinkInsert,
            onSave: props.onSave,
            onFullscreenChange: props.onFullscreenChange,
            autoFocus: a
        };
    };
};
export {
    markdownEditor,
    markdownPreview,
    defaultProps,
    value,
    placeholder,
    viewMode,
    showToolbar,
    showStatusBar,
    gfm,
    enableMath,
    enableMermaid,
    syntaxHighlight,
    keyBindings,
    tabSize,
    lineNumbers,
    wordWrap,
    spellCheck,
    autoFocus,
    readOnly,
    minHeight,
    maxHeight,
    className,
    onChange,
    onImageUpload,
    onLinkInsert,
    onSave,
    onFullscreenChange,
    SplitView,
    EditorOnly,
    PreviewOnly,
    Default,
    Vim,
    Emacs,
    Bold,
    Italic,
    Strikethrough,
    Heading1,
    Heading2,
    Heading3,
    BulletList,
    NumberedList,
    TaskList,
    Blockquote,
    CodeBlock,
    InlineCode,
    Link,
    Image,
    Table,
    HorizontalRule,
    Undo,
    Redo,
    renderMarkdown,
    renderMarkdownToHtml,
    initEditor,
    destroyEditor,
    insertText,
    wrapSelection,
    getSelection,
    setSelection,
    scrollToLine,
    focus,
    blur,
    eqViewMode,
    eqKeyBindings,
    eqToolbarAction
};
