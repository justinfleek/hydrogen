// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                         // hydrogen // scene
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Three.js Scene Wrapper Component
// |
// | A comprehensive 3D scene component wrapping Three.js with support for
// | cameras, lighting, controls, post-processing, and WebXR.
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.ThreeD.Scene as Scene
// |
// | -- Basic 3D scene
// | Scene.scene
// |   { width: 800
// |   , height: 600
// |   , background: Scene.Color "#1a1a2e"
// |   }
// |   [ Scene.perspectiveCamera
// |       { position: { x: 0.0, y: 5.0, z: 10.0 }
// |       , lookAt: { x: 0.0, y: 0.0, z: 0.0 }
// |       }
// |   , Scene.ambientLight { color: "#ffffff", intensity: 0.5 }
// |   , Scene.directionalLight
// |       { color: "#ffffff"
// |       , intensity: 1.0
// |       , position: { x: 5.0, y: 10.0, z: 5.0 }
// |       , castShadow: true
// |       }
// |   , Scene.box
// |       { size: { x: 1.0, y: 1.0, z: 1.0 }
// |       , position: { x: 0.0, y: 0.5, z: 0.0 }
// |       , material: Scene.standardMaterial { color: "#3b82f6" }
// |       }
// |   , Scene.orbitControls { enableDamping: true }
// |   ]
// |
// | -- With skybox and fog
// | Scene.sceneWithProps
// |   Scene.defaultSceneProps
// |     { width = 1200
// |     , height = 800
// |     , background = Scene.Skybox ["px.jpg", "nx.jpg", "py.jpg", "ny.jpg", "pz.jpg", "nz.jpg"]
// |     , fog = Just (Scene.exponentialFog { color: "#87ceeb", density: 0.02 })
// |     , shadows = true
// |     }
// |   sceneChildren
// |
// | -- With post-processing
// | Scene.sceneWithProps
// |   Scene.defaultSceneProps
// |     { postProcessing = [ Scene.bloom { strength: 0.5, radius: 0.4 }
// |                        , Scene.ssao { radius: 16.0 }
// |                        ]
// |     }
// |   sceneChildren
// |
// | -- Load 3D model
// | Scene.gltfModel
// |   { url: "/models/robot.glb"
// |   , position: { x: 0.0, y: 0.0, z: 0.0 }
// |   , scale: 1.0
// |   , onLoad: Just HandleModelLoaded
// |   , onProgress: Just HandleProgress
// |   }
// |
// | -- Raycasting for interaction
// | Scene.sceneWithProps
// |   Scene.defaultSceneProps
// |     { onObjectClick = Just HandleObjectClick
// |     , onObjectHover = Just HandleObjectHover
// |     }
// |   interactiveObjects
// | ```
import * as $foreign from "./foreign.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Halogen_HTML from "../Halogen.HTML/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showNumber);
var show1 = /* #__PURE__ */ Data_Show.show(Data_Show.showBoolean);
var show2 = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var eq1 = /* #__PURE__ */ Data_Eq.eq(/* #__PURE__ */ Data_Eq.eqArray(Data_Eq.eqString));

// | Transform mode
var Translate = /* #__PURE__ */ (function () {
    function Translate() {

    };
    Translate.value = new Translate();
    return Translate;
})();

// | Transform mode
var Rotate = /* #__PURE__ */ (function () {
    function Rotate() {

    };
    Rotate.value = new Rotate();
    return Rotate;
})();

// | Transform mode
var Scale = /* #__PURE__ */ (function () {
    function Scale() {

    };
    Scale.value = new Scale();
    return Scale;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                 // background
// ═══════════════════════════════════════════════════════════════════════════════
// | Scene background type
var Color = /* #__PURE__ */ (function () {
    function Color(value0) {
        this.value0 = value0;
    };
    Color.create = function (value0) {
        return new Color(value0);
    };
    return Color;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                 // background
// ═══════════════════════════════════════════════════════════════════════════════
// | Scene background type
var Skybox = /* #__PURE__ */ (function () {
    function Skybox(value0) {
        this.value0 = value0;
    };
    Skybox.create = function (value0) {
        return new Skybox(value0);
    };
    return Skybox;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                 // background
// ═══════════════════════════════════════════════════════════════════════════════
// | Scene background type
var EquirectangularHDR = /* #__PURE__ */ (function () {
    function EquirectangularHDR(value0) {
        this.value0 = value0;
    };
    EquirectangularHDR.create = function (value0) {
        return new EquirectangularHDR(value0);
    };
    return EquirectangularHDR;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                 // background
// ═══════════════════════════════════════════════════════════════════════════════
// | Scene background type
var Transparent = /* #__PURE__ */ (function () {
    function Transparent() {

    };
    Transparent.value = new Transparent();
    return Transparent;
})();

// | VR button (enter VR mode)
var vrButton = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-xr")("vr"), Halogen_HTML_Properties.attr("data-session-mode")(config.sessionMode), Halogen_HTML_Properties.attr("data-reference-space")(config.referenceSpaceType) ])([  ]);
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // internal
// ═══════════════════════════════════════════════════════════════════════════════
// | Convert Vector3 to string
var vector3ToString = function (v) {
    return show(v.x) + ("," + (show(v.y) + ("," + show(v.z))));
};
var updateCamera = $foreign.updateCameraImpl;

// | Transform controls (move, rotate, scale objects)
var transformControls = function (config) {
    var modeToString = function (v) {
        if (v instanceof Translate) {
            return "translate";
        };
        if (v instanceof Rotate) {
            return "rotate";
        };
        if (v instanceof Scale) {
            return "scale";
        };
        throw new Error("Failed pattern match at Hydrogen.ThreeD.Scene (line 586, column 3 - line 586, column 39): " + [ v.constructor.name ]);
    };
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-controls")("transform"), Halogen_HTML_Properties.attr("data-mode")(modeToString(config.mode)), Halogen_HTML_Properties.attr("data-space")(config.space), Halogen_HTML_Properties.attr("data-show-x")(show1(config.showX)), Halogen_HTML_Properties.attr("data-show-y")(show1(config.showY)), Halogen_HTML_Properties.attr("data-show-z")(show1(config.showZ)), Halogen_HTML_Properties.attr("data-size")(show(config.size)) ])([  ]);
};

// | Load texture from URL
var textureFromUrl = function (url) {
    return {
        url: url,
        wrapS: "repeat",
        wrapT: "repeat",
        repeat: {
            x: 1.0,
            y: 1.0
        },
        flipY: true
    };
};
var takeScreenshot = $foreign.takeScreenshotImpl;

// | Stats panel (FPS counter)
var stats = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-stats")("true"), Halogen_HTML_Properties.attr("data-position")(config.position) ])([  ]);
};
var standardMaterial = function (config) {
    return {
        materialType: "standard",
        color: config.color,
        opacity: config.opacity,
        transparent: config.transparent,
        wireframe: config.wireframe,
        side: "front",
        map: config.map,
        normalMap: config.normalMap,
        roughness: new Data_Maybe.Just(config.roughness),
        metalness: new Data_Maybe.Just(config.metalness),
        emissive: config.emissive,
        emissiveIntensity: config.emissiveIntensity,
        shininess: Data_Maybe.Nothing.value,
        clearcoat: Data_Maybe.Nothing.value,
        clearcoatRoughness: Data_Maybe.Nothing.value
    };
};

// | SSAO (Screen Space Ambient Occlusion) effect
var ssao = function (config) {
    return {
        effectType: "ssao",
        config: $foreign.unsafeToForeign(config)
    };
};

// | Spot light (flashlight)
var spotLight = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-light")("spot"), Halogen_HTML_Properties.attr("data-color")(config.color), Halogen_HTML_Properties.attr("data-intensity")(show(config.intensity)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-target")(vector3ToString(config.target)), Halogen_HTML_Properties.attr("data-distance")(show(config.distance)), Halogen_HTML_Properties.attr("data-angle")(show(config.angle)), Halogen_HTML_Properties.attr("data-penumbra")(show(config.penumbra)), Halogen_HTML_Properties.attr("data-decay")(show(config.decay)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)) ])([  ]);
};
var setBackground = function (ref) {
    return function (bg) {
        var backgroundToStringInternal = function (v) {
            if (v instanceof Color) {
                return "color:" + v.value0;
            };
            if (v instanceof Skybox) {
                return "skybox:" + $foreign.intercalateImpl(",")(v.value0);
            };
            if (v instanceof EquirectangularHDR) {
                return "hdr:" + v.value0;
            };
            if (v instanceof Transparent) {
                return "transparent";
            };
            throw new Error("Failed pattern match at Hydrogen.ThreeD.Scene (line 1516, column 3 - line 1516, column 55): " + [ v.constructor.name ]);
        };
        return $foreign.setBackgroundImpl(ref)(backgroundToStringInternal(bg));
    };
};

// | Scene with full props
var sceneWithProps = function (props) {
    return function (children) {
        var backgroundToString = function (v) {
            if (v instanceof Color) {
                return "color:" + v.value0;
            };
            if (v instanceof Skybox) {
                return "skybox:" + $foreign.intercalateImpl(",")(v.value0);
            };
            if (v instanceof EquirectangularHDR) {
                return "hdr:" + v.value0;
            };
            if (v instanceof Transparent) {
                return "transparent";
            };
            throw new Error("Failed pattern match at Hydrogen.ThreeD.Scene (line 387, column 3 - line 387, column 47): " + [ v.constructor.name ]);
        };
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative overflow-hidden", (function () {
            if (props.responsive) {
                return "w-full h-full";
            };
            return "";
        })(), props.className ]), Halogen_HTML_Properties.attr("data-threejs-scene")("true"), Halogen_HTML_Properties.attr("data-scene-width")(show2(props.width)), Halogen_HTML_Properties.attr("data-scene-height")(show2(props.height)), Halogen_HTML_Properties.attr("data-scene-background")(backgroundToString(props.background)), Halogen_HTML_Properties.attr("data-scene-shadows")(show1(props.shadows)), Halogen_HTML_Properties.attr("data-scene-antialias")(show1(props.antialias)), Halogen_HTML_Properties.attr("data-scene-tonemapping")(props.toneMapping), Halogen_HTML_Properties.attr("data-scene-exposure")(show(props.toneMappingExposure)), Halogen_HTML_Properties.attr("data-scene-responsive")(show1(props.responsive)) ])([ Halogen_HTML_Elements.canvas([ Hydrogen_UI_Core.cls([ "block" ]), Halogen_HTML_Properties.attr("data-threejs-canvas")("true") ]), Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-scene-children")("true"), Halogen_HTML_Properties.style("display: none") ])(map(Halogen_HTML.fromPlainHTML)(children)) ]);
    };
};
var resize = $foreign.resizeImpl;
var removeObject = $foreign.removeObjectImpl;

// | Point light (light bulb)
var pointLight = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-light")("point"), Halogen_HTML_Properties.attr("data-color")(config.color), Halogen_HTML_Properties.attr("data-intensity")(show(config.intensity)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-distance")(show(config.distance)), Halogen_HTML_Properties.attr("data-decay")(show(config.decay)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)) ])([  ]);
};

// | Pi constant
var pi = 3.141592653589793;
var physicalMaterial = function (config) {
    return {
        materialType: "physical",
        color: config.color,
        opacity: config.opacity,
        transparent: config.transparent,
        wireframe: config.wireframe,
        side: "front",
        map: config.map,
        normalMap: config.normalMap,
        roughness: new Data_Maybe.Just(config.roughness),
        metalness: new Data_Maybe.Just(config.metalness),
        emissive: Data_Maybe.Nothing.value,
        emissiveIntensity: Data_Maybe.Nothing.value,
        shininess: Data_Maybe.Nothing.value,
        clearcoat: new Data_Maybe.Just(config.clearcoat),
        clearcoatRoughness: new Data_Maybe.Just(config.clearcoatRoughness)
    };
};
var phongMaterial = function (config) {
    return {
        materialType: "phong",
        color: config.color,
        opacity: config.opacity,
        transparent: config.transparent,
        wireframe: config.wireframe,
        side: "front",
        map: config.map,
        normalMap: Data_Maybe.Nothing.value,
        roughness: Data_Maybe.Nothing.value,
        metalness: Data_Maybe.Nothing.value,
        emissive: config.emissive,
        emissiveIntensity: Data_Maybe.Nothing.value,
        shininess: new Data_Maybe.Just(config.shininess),
        clearcoat: Data_Maybe.Nothing.value,
        clearcoatRoughness: Data_Maybe.Nothing.value
    };
};

// | Perspective camera
var perspectiveCamera = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-camera")("perspective"), Halogen_HTML_Properties.attr("data-fov")(show(config.fov)), Halogen_HTML_Properties.attr("data-near")(show(config.near)), Halogen_HTML_Properties.attr("data-far")(show(config.far)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-lookat")(vector3ToString(config.lookAt)) ])([  ]);
};

// | Orthographic camera
var orthographicCamera = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-camera")("orthographic"), Halogen_HTML_Properties.attr("data-left")(show(config.left)), Halogen_HTML_Properties.attr("data-right")(show(config.right)), Halogen_HTML_Properties.attr("data-top")(show(config.top)), Halogen_HTML_Properties.attr("data-bottom")(show(config.bottom)), Halogen_HTML_Properties.attr("data-near")(show(config.near)), Halogen_HTML_Properties.attr("data-far")(show(config.far)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-lookat")(vector3ToString(config.lookAt)), Halogen_HTML_Properties.attr("data-zoom")(show(config.zoom)) ])([  ]);
};

// | Orbit controls (rotate around target)
var orbitControls = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-controls")("orbit"), Halogen_HTML_Properties.attr("data-enable-damping")(show1(config.enableDamping)), Halogen_HTML_Properties.attr("data-damping-factor")(show(config.dampingFactor)), Halogen_HTML_Properties.attr("data-enable-zoom")(show1(config.enableZoom)), Halogen_HTML_Properties.attr("data-enable-pan")(show1(config.enablePan)), Halogen_HTML_Properties.attr("data-enable-rotate")(show1(config.enableRotate)), Halogen_HTML_Properties.attr("data-min-distance")(show(config.minDistance)), Halogen_HTML_Properties.attr("data-max-distance")(show(config.maxDistance)), Halogen_HTML_Properties.attr("data-auto-rotate")(show1(config.autoRotate)), Halogen_HTML_Properties.attr("data-auto-rotate-speed")(show(config.autoRotateSpeed)) ])([  ]);
};

// | Handler for transform start
var onTransformStart = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-transform-event")("start") ])([  ]);
};

// | Handler for transform end
var onTransformEnd = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-transform-event")("end") ])([  ]);
};

// | Handler for transform change
var onTransformChange = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-transform-event")("change") ])([  ]);
};

// | Handler for object hover
var onObjectHover = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-raycast")("hover") ])([  ]);
};

// | Handler for object click
var onObjectClick = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-raycast")("click") ])([  ]);
};

// | Set animation frame callback
var onAnimationFrame = function (v) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-animation-loop")("true") ])([  ]);
};

// | Convert Material to string
var materialToString = function (m) {
    return m.materialType + (":" + (m.color + (":" + (show(m.opacity) + (":" + (show1(m.transparent) + (":" + show1(m.wireframe))))))));
};

// | Linear fog (distance-based)
var linearFog = function (config) {
    return {
        fogType: "linear",
        color: config.color,
        near: new Data_Maybe.Just(config.near),
        far: new Data_Maybe.Just(config.far),
        density: Data_Maybe.Nothing.value
    };
};

// | Infinity
var infinity = 1.0e308;

// | Hemisphere light (sky + ground ambient)
var hemisphereLight = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-light")("hemisphere"), Halogen_HTML_Properties.attr("data-sky-color")(config.skyColor), Halogen_HTML_Properties.attr("data-ground-color")(config.groundColor), Halogen_HTML_Properties.attr("data-intensity")(show(config.intensity)) ])([  ]);
};

// | Grid helper
var gridHelper = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-helper")("grid"), Halogen_HTML_Properties.attr("data-size")(show(config.size)), Halogen_HTML_Properties.attr("data-divisions")(show2(config.divisions)), Halogen_HTML_Properties.attr("data-color-center")(config.colorCenterLine), Halogen_HTML_Properties.attr("data-color-grid")(config.colorGrid) ])([  ]);
};
var getSceneRef = $foreign.getSceneRefImpl;

// | Fly controls (free-flying camera)
var flyControls = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-controls")("fly"), Halogen_HTML_Properties.attr("data-movement-speed")(show(config.movementSpeed)), Halogen_HTML_Properties.attr("data-roll-speed")(show(config.rollSpeed)), Halogen_HTML_Properties.attr("data-drag-to-look")(show1(config.dragToLook)), Halogen_HTML_Properties.attr("data-auto-forward")(show1(config.autoForward)) ])([  ]);
};

// | First person controls (FPS-style camera)
var firstPersonControls = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-controls")("firstperson"), Halogen_HTML_Properties.attr("data-movement-speed")(show(config.movementSpeed)), Halogen_HTML_Properties.attr("data-look-speed")(show(config.lookSpeed)), Halogen_HTML_Properties.attr("data-look-vertical")(show1(config.lookVertical)), Halogen_HTML_Properties.attr("data-constrain-vertical")(show1(config.constrainVertical)), Halogen_HTML_Properties.attr("data-vertical-min")(show(config.verticalMin)), Halogen_HTML_Properties.attr("data-vertical-max")(show(config.verticalMax)) ])([  ]);
};

// | Exponential fog (density-based)
var exponentialFog = function (config) {
    return {
        fogType: "exponential",
        color: config.color,
        near: Data_Maybe.Nothing.value,
        far: Data_Maybe.Nothing.value,
        density: new Data_Maybe.Just(config.density)
    };
};

// | Convert Euler to string
var eulerToString = function (e) {
    return show(e.x) + ("," + (show(e.y) + ("," + show(e.z))));
};

// | Load FBX model
var fbxModel = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-model")("fbx"), Halogen_HTML_Properties.attr("data-url")(config.url), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-scale")(show(config.scale)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Load GLTF/GLB model
var gltfModel = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-model")("gltf"), Halogen_HTML_Properties.attr("data-url")(config.url), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-scale")(show(config.scale)), Halogen_HTML_Properties.attr("data-auto-center")(show1(config.autoCenter)), Halogen_HTML_Properties.attr("data-auto-scale")(show1(config.autoScale)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Load OBJ model
var objModel = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-model")("obj"), Halogen_HTML_Properties.attr("data-url")(config.objUrl), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-scale")(show(config.scale)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Plane primitive
var plane = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("plane"), Halogen_HTML_Properties.attr("data-width")(show(config.width)), Halogen_HTML_Properties.attr("data-height")(show(config.height)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Ring primitive
var ring = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("ring"), Halogen_HTML_Properties.attr("data-inner-radius")(show(config.innerRadius)), Halogen_HTML_Properties.attr("data-outer-radius")(show(config.outerRadius)), Halogen_HTML_Properties.attr("data-theta-segments")(show2(config.thetaSegments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Sphere primitive
var sphere = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("sphere"), Halogen_HTML_Properties.attr("data-radius")(show(config.radius)), Halogen_HTML_Properties.attr("data-width-segments")(show2(config.widthSegments)), Halogen_HTML_Properties.attr("data-height-segments")(show2(config.heightSegments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Torus (donut) primitive
var torus = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("torus"), Halogen_HTML_Properties.attr("data-radius")(show(config.radius)), Halogen_HTML_Properties.attr("data-tube")(show(config.tube)), Halogen_HTML_Properties.attr("data-radial-segments")(show2(config.radialSegments)), Halogen_HTML_Properties.attr("data-tubular-segments")(show2(config.tubularSegments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Torus knot primitive
var torusKnot = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("torusknot"), Halogen_HTML_Properties.attr("data-radius")(show(config.radius)), Halogen_HTML_Properties.attr("data-tube")(show(config.tube)), Halogen_HTML_Properties.attr("data-tubular-segments")(show2(config.tubularSegments)), Halogen_HTML_Properties.attr("data-radial-segments")(show2(config.radialSegments)), Halogen_HTML_Properties.attr("data-p")(show2(config.p)), Halogen_HTML_Properties.attr("data-q")(show2(config.q)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};
var eqTransformMode = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Translate && y instanceof Translate) {
                return true;
            };
            if (x instanceof Rotate && y instanceof Rotate) {
                return true;
            };
            if (x instanceof Scale && y instanceof Scale) {
                return true;
            };
            return false;
        };
    }
};
var eqBackground = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Color && y instanceof Color) {
                return x.value0 === y.value0;
            };
            if (x instanceof Skybox && y instanceof Skybox) {
                return eq1(x.value0)(y.value0);
            };
            if (x instanceof EquirectangularHDR && y instanceof EquirectangularHDR) {
                return x.value0 === y.value0;
            };
            if (x instanceof Transparent && y instanceof Transparent) {
                return true;
            };
            return false;
        };
    }
};

// | Directional light (sun-like)
var directionalLight = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-light")("directional"), Halogen_HTML_Properties.attr("data-color")(config.color), Halogen_HTML_Properties.attr("data-intensity")(show(config.intensity)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-target")(vector3ToString(config.target)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-shadow-map-size")(show2(config.shadowMapSize)), Halogen_HTML_Properties.attr("data-shadow-bias")(show(config.shadowBias)) ])([  ]);
};

// | Default scene properties
var defaultSceneProps = /* #__PURE__ */ (function () {
    return {
        width: 800,
        height: 600,
        background: new Color("#000000"),
        fog: Data_Maybe.Nothing.value,
        shadows: false,
        shadowMapSize: 1024,
        antialias: true,
        pixelRatio: Data_Maybe.Nothing.value,
        toneMapping: "ACESFilmic",
        toneMappingExposure: 1.0,
        postProcessing: [  ],
        responsive: true,
        onObjectClick: Data_Maybe.Nothing.value,
        onObjectHover: Data_Maybe.Nothing.value,
        onAnimationFrame: Data_Maybe.Nothing.value,
        onReady: Data_Maybe.Nothing.value,
        className: ""
    };
})();

// | Simple scene with basic config
var scene = function (config) {
    return function (children) {
        return sceneWithProps({
            fog: defaultSceneProps.fog,
            shadows: defaultSceneProps.shadows,
            shadowMapSize: defaultSceneProps.shadowMapSize,
            antialias: defaultSceneProps.antialias,
            pixelRatio: defaultSceneProps.pixelRatio,
            toneMapping: defaultSceneProps.toneMapping,
            toneMappingExposure: defaultSceneProps.toneMappingExposure,
            postProcessing: defaultSceneProps.postProcessing,
            responsive: defaultSceneProps.responsive,
            onObjectClick: defaultSceneProps.onObjectClick,
            onObjectHover: defaultSceneProps.onObjectHover,
            onAnimationFrame: defaultSceneProps.onAnimationFrame,
            onReady: defaultSceneProps.onReady,
            className: defaultSceneProps.className,
            width: config.width,
            height: config.height,
            background: config.background
        })(children);
    };
};

// | Default perspective camera config
var defaultPerspectiveCamera = {
    fov: 75.0,
    near: 0.1,
    far: 1000.0,
    position: {
        x: 0.0,
        y: 5.0,
        z: 10.0
    },
    lookAt: {
        x: 0.0,
        y: 0.0,
        z: 0.0
    }
};

// | Default orbit controls config
var defaultOrbitControls = {
    enableDamping: true,
    dampingFactor: 5.0e-2,
    enableZoom: true,
    enablePan: true,
    enableRotate: true,
    minDistance: 0.0,
    maxDistance: infinity,
    minPolarAngle: 0.0,
    maxPolarAngle: pi,
    autoRotate: false,
    autoRotateSpeed: 2.0
};

// | Cylinder primitive
var cylinder = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("cylinder"), Halogen_HTML_Properties.attr("data-radius-top")(show(config.radiusTop)), Halogen_HTML_Properties.attr("data-radius-bottom")(show(config.radiusBottom)), Halogen_HTML_Properties.attr("data-height")(show(config.height)), Halogen_HTML_Properties.attr("data-radial-segments")(show2(config.radialSegments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Cone primitive
var cone = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("cone"), Halogen_HTML_Properties.attr("data-radius")(show(config.radius)), Halogen_HTML_Properties.attr("data-height")(show(config.height)), Halogen_HTML_Properties.attr("data-radial-segments")(show2(config.radialSegments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Circle primitive
var circle = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("circle"), Halogen_HTML_Properties.attr("data-radius")(show(config.radius)), Halogen_HTML_Properties.attr("data-segments")(show2(config.segments)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Box primitive
var box = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-primitive")("box"), Halogen_HTML_Properties.attr("data-size")(vector3ToString(config.size)), Halogen_HTML_Properties.attr("data-position")(vector3ToString(config.position)), Halogen_HTML_Properties.attr("data-rotation")(eulerToString(config.rotation)), Halogen_HTML_Properties.attr("data-material")(materialToString(config.material)), Halogen_HTML_Properties.attr("data-cast-shadow")(show1(config.castShadow)), Halogen_HTML_Properties.attr("data-receive-shadow")(show1(config.receiveShadow)), Halogen_HTML_Properties.attr("data-name")(config.name) ])([  ]);
};

// | Bloom effect
var bloom = function (config) {
    return {
        effectType: "bloom",
        config: $foreign.unsafeToForeign(config)
    };
};
var basicMaterial = function (config) {
    return {
        materialType: "basic",
        color: config.color,
        opacity: config.opacity,
        transparent: config.transparent,
        wireframe: config.wireframe,
        side: "front",
        map: config.map,
        normalMap: Data_Maybe.Nothing.value,
        roughness: Data_Maybe.Nothing.value,
        metalness: Data_Maybe.Nothing.value,
        emissive: Data_Maybe.Nothing.value,
        emissiveIntensity: Data_Maybe.Nothing.value,
        shininess: Data_Maybe.Nothing.value,
        clearcoat: Data_Maybe.Nothing.value,
        clearcoatRoughness: Data_Maybe.Nothing.value
    };
};

// | Axes helper (XYZ arrows)
var axesHelper = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-helper")("axes"), Halogen_HTML_Properties.attr("data-size")(show(config.size)) ])([  ]);
};

// | AR button (enter AR mode)
var arButton = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-xr")("ar"), Halogen_HTML_Properties.attr("data-session-mode")(config.sessionMode), Halogen_HTML_Properties.attr("data-required-features")($foreign.intercalateImpl(",")(config.requiredFeatures)), Halogen_HTML_Properties.attr("data-optional-features")($foreign.intercalateImpl(",")(config.optionalFeatures)) ])([  ]);
};

// | Ambient light (uniform illumination)
var ambientLight = function (config) {
    return Halogen_HTML_Elements.div([ Halogen_HTML_Properties.attr("data-light")("ambient"), Halogen_HTML_Properties.attr("data-color")(config.color), Halogen_HTML_Properties.attr("data-intensity")(show(config.intensity)) ])([  ]);
};
var addObject = $foreign.addObjectImpl;
export {
    scene,
    sceneWithProps,
    defaultSceneProps,
    Color,
    Skybox,
    EquirectangularHDR,
    Transparent,
    linearFog,
    exponentialFog,
    perspectiveCamera,
    orthographicCamera,
    orbitControls,
    flyControls,
    firstPersonControls,
    transformControls,
    Translate,
    Rotate,
    Scale,
    ambientLight,
    directionalLight,
    pointLight,
    spotLight,
    hemisphereLight,
    box,
    sphere,
    plane,
    cylinder,
    cone,
    torus,
    torusKnot,
    ring,
    circle,
    basicMaterial,
    standardMaterial,
    phongMaterial,
    physicalMaterial,
    textureFromUrl,
    gltfModel,
    objModel,
    fbxModel,
    gridHelper,
    axesHelper,
    stats,
    onObjectClick,
    onObjectHover,
    onTransformStart,
    onTransformChange,
    onTransformEnd,
    bloom,
    ssao,
    vrButton,
    arButton,
    takeScreenshot,
    onAnimationFrame,
    getSceneRef,
    addObject,
    removeObject,
    updateCamera,
    setBackground,
    resize,
    eqBackground,
    eqTransformMode
};
