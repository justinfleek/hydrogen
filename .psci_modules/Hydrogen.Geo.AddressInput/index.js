// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                   // hydrogen // addressinput
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Address autocomplete component
// |
// | A comprehensive address input with autocomplete suggestions, geocoding,
// | and reverse geocoding. Works with Nominatim (OSM) or pluggable providers.
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Geo.AddressInput as Address
// |
// | -- Basic address input
// | Address.addressInput
// |   [ Address.placeholder "Enter an address..."
// |   , Address.onSelect \place -> HandleAddressSelect place
// |   ]
// |
// | -- With current location button
// | Address.addressInput
// |   [ Address.placeholder "Search location..."
// |   , Address.showCurrentLocation true
// |   , Address.onSelect HandleAddressSelect
// |   , Address.onCurrentLocation HandleCurrentLocation
// |   ]
// |
// | -- With map preview
// | Address.addressInput
// |   [ Address.placeholder "Delivery address"
// |   , Address.showMapPreview true
// |   , Address.onSelect HandleAddressSelect
// |   ]
// |
// | -- Custom geocoding provider
// | Address.addressInput
// |   [ Address.provider myCustomProvider
// |   , Address.onSelect HandleAddressSelect
// |   ]
// |
// | -- Geocode an address
// | result <- Address.geocode "1600 Amphitheatre Parkway, Mountain View, CA"
// | case result of
// |   Right places -> -- Array of matching places
// |   Left error -> -- Handle error
// |
// | -- Reverse geocode coordinates
// | result <- Address.reverseGeocode { lat: 37.4224, lng: -122.0842 }
// | case result of
// |   Right address -> Console.log address.formatted
// |   Left error -> -- Handle error
// | ```
import * as $foreign from "./foreign.js";
import * as DOM_HTML_Indexed_ButtonType from "../DOM.HTML.Indexed.ButtonType/index.js";
import * as DOM_HTML_Indexed_InputType from "../DOM.HTML.Indexed.InputType/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Effect_Aff_Compat from "../Effect.Aff.Compat/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var type_ = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropInputType);
var value1 = /* #__PURE__ */ Halogen_HTML_Properties.value(Halogen_HTML_Core.isPropString);
var type_1 = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropButtonType);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var StreetNumber = /* #__PURE__ */ (function () {
    function StreetNumber() {

    };
    StreetNumber.value = new StreetNumber();
    return StreetNumber;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var StreetName = /* #__PURE__ */ (function () {
    function StreetName() {

    };
    StreetName.value = new StreetName();
    return StreetName;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var Neighborhood = /* #__PURE__ */ (function () {
    function Neighborhood() {

    };
    Neighborhood.value = new Neighborhood();
    return Neighborhood;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var City = /* #__PURE__ */ (function () {
    function City() {

    };
    City.value = new City();
    return City;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var County = /* #__PURE__ */ (function () {
    function County() {

    };
    County.value = new County();
    return County;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var State = /* #__PURE__ */ (function () {
    function State() {

    };
    State.value = new State();
    return State;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var Country = /* #__PURE__ */ (function () {
    function Country() {

    };
    Country.value = new Country();
    return Country;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var PostalCode = /* #__PURE__ */ (function () {
    function PostalCode() {

    };
    PostalCode.value = new PostalCode();
    return PostalCode;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var PlusCode = /* #__PURE__ */ (function () {
    function PlusCode() {

    };
    PlusCode.value = new PlusCode();
    return PlusCode;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Address component types
var Other = /* #__PURE__ */ (function () {
    function Other(value0) {
        this.value0 = value0;
    };
    Other.create = function (value0) {
        return new Other(value0);
    };
    return Other;
})();

// | Set input value
var value = function (v) {
    return function (props) {
        return {
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            value: v
        };
    };
};

// | Show map preview of selected address
var showMapPreview = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            showMapPreview: s
        };
    };
};

// | Show current location button
var showCurrentLocation = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            showCurrentLocation: s
        };
    };
};
var showComponentType = {
    show: function (v) {
        if (v instanceof StreetNumber) {
            return "StreetNumber";
        };
        if (v instanceof StreetName) {
            return "StreetName";
        };
        if (v instanceof Neighborhood) {
            return "Neighborhood";
        };
        if (v instanceof City) {
            return "City";
        };
        if (v instanceof County) {
            return "County";
        };
        if (v instanceof State) {
            return "State";
        };
        if (v instanceof Country) {
            return "Country";
        };
        if (v instanceof PostalCode) {
            return "PostalCode";
        };
        if (v instanceof PlusCode) {
            return "PlusCode";
        };
        if (v instanceof Other) {
            return "Other: " + v.value0;
        };
        throw new Error("Failed pattern match at Hydrogen.Geo.AddressInput (line 137, column 1 - line 147, column 34): " + [ v.constructor.name ]);
    }
};

// | Show clear button
var showClearButton = function (s) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            showClearButton: s
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // icons
// ═══════════════════════════════════════════════════════════════════════════════
var searchIcon = /* #__PURE__ */ Halogen_HTML_Elements.element("svg")([ /* #__PURE__ */ Hydrogen_UI_Core.cls([ "h-4 w-4" ]), /* #__PURE__ */ Halogen_HTML_Properties.attr("fill")("none"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke")("currentColor"), /* #__PURE__ */ Halogen_HTML_Properties.attr("viewBox")("0 0 24 24") ])([ /* #__PURE__ */ Halogen_HTML_Elements.element("path")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linecap")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linejoin")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-width")("2"), /* #__PURE__ */ Halogen_HTML_Properties.attr("d")("M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z") ])([  ]) ]);
var reverseGeocodeImpl = function (coords) {
    return Effect_Aff_Compat.fromEffectFnAff($foreign.reverseGeocodeImplAff(coords));
};

// | Reverse geocode coordinates to an address
var reverseGeocode = reverseGeocodeImpl;

// | Set recent searches
var recentSearches = function (places) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            provider: props.provider,
            recentSearches: places
        };
    };
};

// | Set geocoding provider
var provider = function (p) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: p
        };
    };
};

// | Set placeholder text
var placeholder = function (p) {
    return function (props) {
        return {
            value: props.value,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            placeholder: p
        };
    };
};

// | Handle address selection
var onSelect = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            onSelect: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle current location
var onCurrentLocation = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            onCurrentLocation: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle clear
var onClear = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            onClear: new Data_Maybe.Just(handler)
        };
    };
};

// | Handle input change
var onChange = function (handler) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            onChange: new Data_Maybe.Just(handler)
        };
    };
};

// Helper for null check
var $$null = function (arr) {
    return $foreign.arrayLength(arr) === 0;
};
var nominatimSearch = function (query) {
    return Effect_Aff_Compat.fromEffectFnAff($foreign.nominatimSearchImpl(query));
};
var nominatimReverse = function (coords) {
    return Effect_Aff_Compat.fromEffectFnAff($foreign.nominatimReverseImpl(coords));
};
var nominatimDetails = function (placeId) {
    return Effect_Aff_Compat.fromEffectFnAff($foreign.nominatimDetailsImpl(placeId));
};

// | Nominatim (OpenStreetMap) provider
var nominatimProvider = {
    search: nominatimSearch,
    reverseGeocode: nominatimReverse,
    getPlaceDetails: nominatimDetails,
    name: "Nominatim"
};

// | Set minimum characters before searching
var minChars = function (n) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            minChars: n
        };
    };
};

// | Set maximum suggestions to show
var maxSuggestions = function (n) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            recentSearches: props.recentSearches,
            provider: props.provider,
            maxSuggestions: n
        };
    };
};
var locationIcon = /* #__PURE__ */ Halogen_HTML_Elements.element("svg")([ /* #__PURE__ */ Hydrogen_UI_Core.cls([ "h-4 w-4" ]), /* #__PURE__ */ Halogen_HTML_Properties.attr("fill")("none"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke")("currentColor"), /* #__PURE__ */ Halogen_HTML_Properties.attr("viewBox")("0 0 24 24") ])([ /* #__PURE__ */ Halogen_HTML_Elements.element("path")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linecap")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linejoin")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-width")("2"), /* #__PURE__ */ Halogen_HTML_Properties.attr("d")("M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z") ])([  ]), /* #__PURE__ */ Halogen_HTML_Elements.element("path")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linecap")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linejoin")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-width")("2"), /* #__PURE__ */ Halogen_HTML_Properties.attr("d")("M15 11a3 3 0 11-6 0 3 3 0 016 0z") ])([  ]) ]);

// | Get street address
var getStreet = function (v) {
    return v.street;
};

// | Get state/province
var getState = function (v) {
    return v.state;
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                             // recent searches
// ═══════════════════════════════════════════════════════════════════════════════
// | Get recent searches from localStorage
var getRecentSearches = $foreign.getRecentSearchesImpl;

// | Get postal code
var getPostalCode = function (v) {
    return v.postalCode;
};

// | Get country
var getCountry = function (v) {
    return v.country;
};

// | Get city
var getCity = function (v) {
    return v.city;
};
var geocodeImpl = function (query) {
    return Effect_Aff_Compat.fromEffectFnAff($foreign.geocodeImplAff(query));
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // geocoding
// ═══════════════════════════════════════════════════════════════════════════════
// | Geocode an address string to coordinates
var geocode = geocodeImpl;

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // utilities
// ═══════════════════════════════════════════════════════════════════════════════
// | Format address for display
var formatAddress = function (v) {
    return v.formatted;
};
var eqComponentType = {
    eq: function (x) {
        return function (y) {
            if (x instanceof StreetNumber && y instanceof StreetNumber) {
                return true;
            };
            if (x instanceof StreetName && y instanceof StreetName) {
                return true;
            };
            if (x instanceof Neighborhood && y instanceof Neighborhood) {
                return true;
            };
            if (x instanceof City && y instanceof City) {
                return true;
            };
            if (x instanceof County && y instanceof County) {
                return true;
            };
            if (x instanceof State && y instanceof State) {
                return true;
            };
            if (x instanceof Country && y instanceof Country) {
                return true;
            };
            if (x instanceof PostalCode && y instanceof PostalCode) {
                return true;
            };
            if (x instanceof PlusCode && y instanceof PlusCode) {
                return true;
            };
            if (x instanceof Other && y instanceof Other) {
                return x.value0 === y.value0;
            };
            return false;
        };
    }
};
var eq2 = /* #__PURE__ */ Data_Eq.eq(eqComponentType);

// | Get address component by type
var getComponent = function (compType) {
    return function (addr) {
        var isJust = function (v) {
            if (v instanceof Data_Maybe.Just) {
                return true;
            };
            if (v instanceof Data_Maybe.Nothing) {
                return false;
            };
            throw new Error("Failed pattern match at Hydrogen.Geo.AddressInput (line 619, column 3 - line 619, column 41): " + [ v.constructor.name ]);
        };
        var findType = function (t) {
            return function (types) {
                return isJust(Data_Array.find(function (v) {
                    return eq2(v)(t);
                })(types));
            };
        };
        var hasType = function (t) {
            return function (comp) {
                return findType(t)(comp.types);
            };
        };
        return Data_Array.find(hasType(compType))(addr.components);
    };
};

// | Set disabled state
var disabled = function (d) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            disabled: d
        };
    };
};
var defaultProps = /* #__PURE__ */ (function () {
    return {
        value: "",
        placeholder: "Enter address...",
        disabled: false,
        className: "",
        onSelect: Data_Maybe.Nothing.value,
        onChange: Data_Maybe.Nothing.value,
        onClear: Data_Maybe.Nothing.value,
        onCurrentLocation: Data_Maybe.Nothing.value,
        showCurrentLocation: false,
        showClearButton: true,
        showMapPreview: false,
        debounceMs: 300,
        minChars: 3,
        maxSuggestions: 5,
        recentSearches: [  ],
        provider: nominatimProvider
    };
})();

// | Set debounce delay in milliseconds
var debounceMs = function (ms) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            className: props.className,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            debounceMs: ms
        };
    };
};

// | Create a custom provider
var createProvider = function (name) {
    return function (search) {
        return function (reverse) {
            return function (details) {
                return {
                    search: search,
                    reverseGeocode: reverse,
                    getPlaceDetails: details,
                    name: name
                };
            };
        };
    };
};

// | Clear recent searches
var clearRecentSearches = $foreign.clearRecentSearchesImpl;
var clearIcon = /* #__PURE__ */ Halogen_HTML_Elements.element("svg")([ /* #__PURE__ */ Hydrogen_UI_Core.cls([ "h-4 w-4" ]), /* #__PURE__ */ Halogen_HTML_Properties.attr("fill")("none"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke")("currentColor"), /* #__PURE__ */ Halogen_HTML_Properties.attr("viewBox")("0 0 24 24") ])([ /* #__PURE__ */ Halogen_HTML_Elements.element("path")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linecap")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linejoin")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-width")("2"), /* #__PURE__ */ Halogen_HTML_Properties.attr("d")("M6 18L18 6M6 6l12 12") ])([  ]) ]);

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            value: props.value,
            placeholder: props.placeholder,
            disabled: props.disabled,
            onSelect: props.onSelect,
            onChange: props.onChange,
            onClear: props.onClear,
            onCurrentLocation: props.onCurrentLocation,
            showCurrentLocation: props.showCurrentLocation,
            showClearButton: props.showClearButton,
            showMapPreview: props.showMapPreview,
            debounceMs: props.debounceMs,
            minChars: props.minChars,
            maxSuggestions: props.maxSuggestions,
            recentSearches: props.recentSearches,
            provider: props.provider,
            className: props.className + (" " + c)
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // component
// ═══════════════════════════════════════════════════════════════════════════════
// | Address autocomplete input component
var addressInput = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultProps)(propMods);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative w-full", props.className ]), Halogen_HTML_Properties.attr("data-address-input")("true"), Halogen_HTML_Properties.attr("data-debounce")(show(props.debounceMs)), Halogen_HTML_Properties.attr("data-min-chars")(show(props.minChars)), Halogen_HTML_Properties.attr("data-max-suggestions")(show(props.maxSuggestions)), Halogen_HTML_Properties.attr("data-provider")(props.provider.name) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative flex items-center" ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute left-3 pointer-events-none text-muted-foreground" ]) ])([ searchIcon ]), Halogen_HTML_Elements.input([ type_(DOM_HTML_Indexed_InputType.InputText.value), value1(props.value), Halogen_HTML_Properties.placeholder(props.placeholder), Halogen_HTML_Properties.disabled(props.disabled), Hydrogen_UI_Core.cls([ "flex h-10 w-full rounded-md border border-input bg-background", "pl-10 pr-20 py-2 text-sm ring-offset-background", "file:border-0 file:bg-transparent file:text-sm file:font-medium", "placeholder:text-muted-foreground", "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2", "disabled:cursor-not-allowed disabled:opacity-50" ]), Halogen_HTML_Properties.attr("autocomplete")("off"), Halogen_HTML_Properties.attr("data-address-input-field")("true"), Halogen_HTML_Properties_ARIA.role("combobox"), Halogen_HTML_Properties_ARIA.expanded("false"), Halogen_HTML_Properties_ARIA.hasPopup("listbox"), Halogen_HTML_Properties_ARIA.autoComplete("list") ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute right-2 flex items-center gap-1" ]) ])([ (function () {
        if (props.showCurrentLocation) {
            return Halogen_HTML_Elements.button([ type_1(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Hydrogen_UI_Core.cls([ "p-1.5 rounded-md text-muted-foreground hover:text-foreground", "hover:bg-accent transition-colors", "focus:outline-none focus:ring-2 focus:ring-ring" ]), Halogen_HTML_Properties.attr("data-current-location-btn")("true"), Halogen_HTML_Properties.title("Use current location"), Halogen_HTML_Properties_ARIA.label("Use current location") ])([ locationIcon ]);
        };
        return Halogen_HTML_Core.text("");
    })(), (function () {
        if (props.showClearButton) {
            return Halogen_HTML_Elements.button([ type_1(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Hydrogen_UI_Core.cls([ "p-1.5 rounded-md text-muted-foreground hover:text-foreground", "hover:bg-accent transition-colors", "focus:outline-none focus:ring-2 focus:ring-ring", "hidden" ]), Halogen_HTML_Properties.attr("data-clear-btn")("true"), Halogen_HTML_Properties.title("Clear"), Halogen_HTML_Properties_ARIA.label("Clear address") ])([ clearIcon ]);
        };
        return Halogen_HTML_Core.text("");
    })() ]) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute z-50 w-full mt-1 bg-popover border border-border rounded-md shadow-lg", "overflow-hidden hidden" ]), Halogen_HTML_Properties.attr("data-suggestions")("true"), Halogen_HTML_Properties_ARIA.role("listbox") ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "p-3 text-center text-muted-foreground hidden" ]), Halogen_HTML_Properties.attr("data-loading")("true") ])([ Halogen_HTML_Core.text("Searching...") ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "p-3 text-center text-muted-foreground hidden" ]), Halogen_HTML_Properties.attr("data-empty")("true") ])([ Halogen_HTML_Core.text("No results found") ]), Halogen_HTML_Elements.ul([ Hydrogen_UI_Core.cls([ "max-h-60 overflow-auto" ]), Halogen_HTML_Properties.attr("data-suggestion-list")("true"), Halogen_HTML_Properties_ARIA.role("listbox") ])([  ]), (function () {
        var $48 = !$$null(props.recentSearches);
        if ($48) {
            return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "border-t border-border hidden" ]), Halogen_HTML_Properties.attr("data-recent-searches")("true") ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "px-3 py-2 text-xs font-medium text-muted-foreground" ]) ])([ Halogen_HTML_Core.text("Recent") ]), Halogen_HTML_Elements.ul([ Hydrogen_UI_Core.cls([ "max-h-40 overflow-auto" ]) ])([  ]) ]);
        };
        return Halogen_HTML_Core.text("");
    })() ]), (function () {
        if (props.showMapPreview) {
            return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "mt-2 h-32 rounded-md border border-border bg-muted overflow-hidden hidden" ]), Halogen_HTML_Properties.attr("data-map-preview")("true") ])([  ]);
        };
        return Halogen_HTML_Core.text("");
    })() ]);
};

// | Add a place to recent searches
var addRecentSearch = $foreign.addRecentSearchImpl;
export {
    addressInput,
    defaultProps,
    value,
    placeholder,
    disabled,
    className,
    onSelect,
    onChange,
    onClear,
    onCurrentLocation,
    showCurrentLocation,
    showClearButton,
    showMapPreview,
    debounceMs,
    minChars,
    maxSuggestions,
    recentSearches,
    provider,
    StreetNumber,
    StreetName,
    Neighborhood,
    City,
    County,
    State,
    Country,
    PostalCode,
    PlusCode,
    Other,
    geocode,
    reverseGeocode,
    nominatimProvider,
    createProvider,
    getRecentSearches,
    addRecentSearch,
    clearRecentSearches,
    formatAddress,
    getComponent,
    getStreet,
    getCity,
    getState,
    getCountry,
    getPostalCode,
    eqComponentType,
    showComponentType
};
