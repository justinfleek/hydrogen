// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                    // hydrogen // filebrowser
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | File Browser component
// |
// | A file manager interface with tree view, grid/list views, and
// | full file operations including create, rename, delete, move, and copy.
// |
// | ## Features
// |
// | - Tree view of folders
// | - Grid/list view toggle
// | - Breadcrumb navigation
// | - Create folder
// | - Rename file/folder
// | - Delete with confirmation
// | - Move/copy files
// | - Multi-select
// | - Context menu
// | - Sort by name/date/size
// | - Search/filter
// | - File icons by type
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Media.FileBrowser as FileBrowser
// |
// | -- Basic file browser
// | FileBrowser.fileBrowser
// |   [ FileBrowser.files myFiles
// |   , FileBrowser.onSelect HandleFileSelect
// |   , FileBrowser.onNavigate HandleNavigate
// |   ]
// |
// | -- With sidebar tree
// | FileBrowser.fileBrowser
// |   [ FileBrowser.showSidebar true
// |   , FileBrowser.sidebarWidth 250
// |   , FileBrowser.onFolderExpand HandleFolderExpand
// |   ]
// |
// | -- Grid view with thumbnails
// | FileBrowser.fileBrowser
// |   [ FileBrowser.viewMode FileBrowser.Grid
// |   , FileBrowser.showThumbnails true
// |   , FileBrowser.thumbnailSize 120
// |   ]
// |
// | -- With context menu
// | FileBrowser.fileBrowser
// |   [ FileBrowser.contextMenu 
// |       [ FileBrowser.menuItem "Open" HandleOpen
// |       , FileBrowser.menuItem "Rename" HandleRename
// |       , FileBrowser.menuDivider
// |       , FileBrowser.menuItem "Delete" HandleDelete
// |       ]
// |   ]
// | ```
import * as $foreign from "./foreign.js";
import * as Control_Applicative from "../Control.Applicative/index.js";
import * as DOM_HTML_Indexed_ButtonType from "../DOM.HTML.Indexed.ButtonType/index.js";
import * as DOM_HTML_Indexed_InputType from "../DOM.HTML.Indexed.InputType/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Eq from "../Data.Eq/index.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Data_Unit from "../Data.Unit/index.js";
import * as Effect from "../Effect/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Events from "../Halogen.HTML.Events/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var pure = /* #__PURE__ */ Control_Applicative.pure(Effect.applicativeEffect);
var append1 = /* #__PURE__ */ Data_Semigroup.append(Data_Semigroup.semigroupArray);
var map = /* #__PURE__ */ Data_Functor.map(Data_Functor.functorArray);
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);
var type_ = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropButtonType);
var type_1 = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropInputType);
var value = /* #__PURE__ */ Halogen_HTML_Properties.value(Halogen_HTML_Core.isPropString);
var show1 = /* #__PURE__ */ Data_Show.show(Data_Show.showNumber);

// | View mode
var Grid = /* #__PURE__ */ (function () {
    function Grid() {

    };
    Grid.value = new Grid();
    return Grid;
})();

// | View mode
var List = /* #__PURE__ */ (function () {
    function List() {

    };
    List.value = new List();
    return List;
})();

// | Sort order
var Ascending = /* #__PURE__ */ (function () {
    function Ascending() {

    };
    Ascending.value = new Ascending();
    return Ascending;
})();

// | Sort order
var Descending = /* #__PURE__ */ (function () {
    function Descending() {

    };
    Descending.value = new Descending();
    return Descending;
})();

// | Sort field
var SortByName = /* #__PURE__ */ (function () {
    function SortByName() {

    };
    SortByName.value = new SortByName();
    return SortByName;
})();

// | Sort field
var SortByDate = /* #__PURE__ */ (function () {
    function SortByDate() {

    };
    SortByDate.value = new SortByDate();
    return SortByDate;
})();

// | Sort field
var SortBySize = /* #__PURE__ */ (function () {
    function SortBySize() {

    };
    SortBySize.value = new SortBySize();
    return SortBySize;
})();

// | Sort field
var SortByType = /* #__PURE__ */ (function () {
    function SortByType() {

    };
    SortByType.value = new SortByType();
    return SortByType;
})();

// | Context menu item
var MenuAction = /* #__PURE__ */ (function () {
    function MenuAction(value0) {
        this.value0 = value0;
    };
    MenuAction.create = function (value0) {
        return new MenuAction(value0);
    };
    return MenuAction;
})();

// | Context menu item
var MenuDivider = /* #__PURE__ */ (function () {
    function MenuDivider() {

    };
    MenuDivider.value = new MenuDivider();
    return MenuDivider;
})();

// | Context menu item
var MenuSubmenu = /* #__PURE__ */ (function () {
    function MenuSubmenu(value0) {
        this.value0 = value0;
    };
    MenuSubmenu.create = function (value0) {
        return new MenuSubmenu(value0);
    };
    return MenuSubmenu;
})();

// | File type
var Folder = /* #__PURE__ */ (function () {
    function Folder() {

    };
    Folder.value = new Folder();
    return Folder;
})();

// | File type
var Image = /* #__PURE__ */ (function () {
    function Image() {

    };
    Image.value = new Image();
    return Image;
})();

// | File type
var Video = /* #__PURE__ */ (function () {
    function Video() {

    };
    Video.value = new Video();
    return Video;
})();

// | File type
var Audio = /* #__PURE__ */ (function () {
    function Audio() {

    };
    Audio.value = new Audio();
    return Audio;
})();

// | File type
var Document = /* #__PURE__ */ (function () {
    function Document() {

    };
    Document.value = new Document();
    return Document;
})();

// | File type
var Archive = /* #__PURE__ */ (function () {
    function Archive() {

    };
    Archive.value = new Archive();
    return Archive;
})();

// | File type
var Code = /* #__PURE__ */ (function () {
    function Code() {

    };
    Code.value = new Code();
    return Code;
})();

// | File type
var Other = /* #__PURE__ */ (function () {
    function Other() {

    };
    Other.value = new Other();
    return Other;
})();

// | Set view mode
var viewMode = function (v) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            viewMode: v
        };
    };
};

// | Add custom class to tree
var treeClassName = function (c) {
    return function (props) {
        return {
            folders: props.folders,
            expandedFolders: props.expandedFolders,
            currentPath: props.currentPath,
            onFolderSelect: props.onFolderSelect,
            onFolderExpand: props.onFolderExpand,
            onFolderCollapse: props.onFolderCollapse,
            className: props.className + (" " + c)
        };
    };
};

// | Set thumbnail size
var thumbnailSize = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            thumbnailSize: s
        };
    };
};

// | Set sort order
var sortOrder = function (o) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            sortOrder: o
        };
    };
};

// | Set sort field
var sortBy = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            sortBy: s
        };
    };
};

// | Set sidebar width
var sidebarWidth = function (w) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            sidebarWidth: w
        };
    };
};

// | Show toolbar
var showToolbar = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            showToolbar: s
        };
    };
};

// | Show thumbnails
var showThumbnails = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            showThumbnails: s
        };
    };
};

// | Show sidebar tree
var showSidebar = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            showSidebar: s
        };
    };
};

// | Show search
var showSearch = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            showSearch: s
        };
    };
};

// | Show breadcrumbs
var showBreadcrumbs = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            showBreadcrumbs: s
        };
    };
};

// | Set selected files
var selectedFiles = function (s) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            selectedFiles: s
        };
    };
};

// | Deselect all files
var selectNone = function (v) {
    return pure(Data_Unit.unit);
};

// | Select all files
var selectAll = function (v) {
    return pure([  ]);
};

// | Set search query
var searchQuery = function (q) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            searchQuery: q
        };
    };
};

// | Set select handler
var onSelect = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onSelect: new Data_Maybe.Just(handler)
        };
    };
};

// | Set search change handler
var onSearchChange = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: new Data_Maybe.Just(handler)
        };
    };
};

// | Set rename handler
var onRename = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onRename: new Data_Maybe.Just(handler)
        };
    };
};

// | Set open handler
var onOpen = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onOpen: new Data_Maybe.Just(handler)
        };
    };
};

// | Set navigate handler
var onNavigate = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onNavigate: new Data_Maybe.Just(handler)
        };
    };
};

// | Set move handler
var onMove = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onMove: new Data_Maybe.Just(handler)
        };
    };
};

// | Set folder select handler
var onFolderSelect = function (handler) {
    return function (props) {
        return {
            folders: props.folders,
            expandedFolders: props.expandedFolders,
            currentPath: props.currentPath,
            className: props.className,
            onFolderExpand: props.onFolderExpand,
            onFolderCollapse: props.onFolderCollapse,
            onFolderSelect: new Data_Maybe.Just(handler)
        };
    };
};

// | Set folder expand handler
var onFolderExpand = function (handler) {
    return function (props) {
        return {
            folders: props.folders,
            expandedFolders: props.expandedFolders,
            currentPath: props.currentPath,
            className: props.className,
            onFolderSelect: props.onFolderSelect,
            onFolderCollapse: props.onFolderCollapse,
            onFolderExpand: new Data_Maybe.Just(handler)
        };
    };
};

// | Set folder collapse handler
var onFolderCollapse = function (handler) {
    return function (props) {
        return {
            folders: props.folders,
            expandedFolders: props.expandedFolders,
            currentPath: props.currentPath,
            className: props.className,
            onFolderSelect: props.onFolderSelect,
            onFolderExpand: props.onFolderExpand,
            onFolderCollapse: new Data_Maybe.Just(handler)
        };
    };
};

// | Set delete handler
var onDelete = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onDelete: new Data_Maybe.Just(handler)
        };
    };
};

// | Set create handler
var onCreate = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            onCreate: new Data_Maybe.Just(handler)
        };
    };
};

// | Set copy handler
var onCopy = function (handler) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onSearchChange: props.onSearchChange,
            onCopy: new Data_Maybe.Just(handler)
        };
    };
};

// | Enable multi-select
var multiSelect = function (m) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            multiSelect: m
        };
    };
};

// | Invert selection
var invertSelection = function (v) {
    return pure([  ]);
};

// | Initialize browser
var initBrowser = function (el) {
    return function (callbacks) {
        return pure($foreign.unsafeBrowserElement);
    };
};

// | Set folders
var folders = function (f) {
    return function (props) {
        return {
            expandedFolders: props.expandedFolders,
            currentPath: props.currentPath,
            className: props.className,
            onFolderSelect: props.onFolderSelect,
            onFolderExpand: props.onFolderExpand,
            onFolderCollapse: props.onFolderCollapse,
            folders: f
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                               // prop builders
// ═══════════════════════════════════════════════════════════════════════════════
// | Set files
var files = function (f) {
    return function (props) {
        return {
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            files: f
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                     // helpers
// ═══════════════════════════════════════════════════════════════════════════════
// | Get icon for file type
var fileIcon = function (fileType) {
    var icon = (function () {
        if (fileType instanceof Folder) {
            return "F";
        };
        if (fileType instanceof Image) {
            return "I";
        };
        if (fileType instanceof Video) {
            return "V";
        };
        if (fileType instanceof Audio) {
            return "A";
        };
        if (fileType instanceof Document) {
            return "D";
        };
        if (fileType instanceof Archive) {
            return "Z";
        };
        if (fileType instanceof Code) {
            return "C";
        };
        if (fileType instanceof Other) {
            return "?";
        };
        throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 942, column 12 - line 950, column 19): " + [ fileType.constructor.name ]);
    })();
    var colorClass = (function () {
        if (fileType instanceof Folder) {
            return "text-yellow-500";
        };
        if (fileType instanceof Image) {
            return "text-green-500";
        };
        if (fileType instanceof Video) {
            return "text-purple-500";
        };
        if (fileType instanceof Audio) {
            return "text-pink-500";
        };
        if (fileType instanceof Document) {
            return "text-blue-500";
        };
        if (fileType instanceof Archive) {
            return "text-orange-500";
        };
        if (fileType instanceof Code) {
            return "text-cyan-500";
        };
        if (fileType instanceof Other) {
            return "text-muted-foreground";
        };
        throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 952, column 18 - line 960, column 39): " + [ fileType.constructor.name ]);
    })();
    return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "text-lg", colorClass ]) ])([ Halogen_HTML_Core.text(icon) ]);
};

// | File list view component
// |
// | List view of files
var fileListView = function (props) {
    return function (fileList) {
        var renderListItem = function (entry) {
            var itemClasses = "flex items-center gap-4 px-4 py-2 cursor-pointer transition-colors hover:bg-muted" + (function () {
                if (entry.selected) {
                    return " bg-accent";
                };
                return "";
            })();
            var dblClickHandler = (function () {
                if (props.onOpen instanceof Data_Maybe.Just) {
                    return [ Halogen_HTML_Events.onDoubleClick(function (v) {
                        return props.onOpen.value0(entry);
                    }) ];
                };
                if (props.onOpen instanceof Data_Maybe.Nothing) {
                    return [  ];
                };
                throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 736, column 27 - line 738, column 24): " + [ props.onOpen.constructor.name ]);
            })();
            var clickHandler = (function () {
                if (props.onSelect instanceof Data_Maybe.Just) {
                    return [ Halogen_HTML_Events.onClick(function (v) {
                        return props.onSelect.value0({
                            fileIds: [ entry.id ],
                            files: [ entry ]
                        });
                    }) ];
                };
                if (props.onSelect instanceof Data_Maybe.Nothing) {
                    return [  ];
                };
                throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 731, column 24 - line 734, column 24): " + [ props.onSelect.constructor.name ]);
            })();
            return Halogen_HTML_Elements.div(append1([ Hydrogen_UI_Core.cls([ itemClasses ]), Halogen_HTML_Properties.attr("data-file-id")(entry.id), Halogen_HTML_Properties_ARIA.role("row") ])(append1(clickHandler)(dblClickHandler)))([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-8 flex items-center justify-center" ]) ])([ fileIcon(entry.type_) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex-1 truncate text-sm" ]) ])([ Halogen_HTML_Core.text(entry.name) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-24 text-xs text-muted-foreground" ]) ])([ Halogen_HTML_Core.text($foreign.formatFileSizeImpl(entry.size)) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-32 text-xs text-muted-foreground" ]) ])([ Halogen_HTML_Core.text(entry.modified) ]) ]);
        };
        
        // Header row
var headerRow = Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center gap-4 px-4 py-2 border-b text-xs font-medium text-muted-foreground" ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-8" ]) ])([  ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex-1" ]) ])([ Halogen_HTML_Core.text("Name") ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-24" ]) ])([ Halogen_HTML_Core.text("Size") ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-32" ]) ])([ Halogen_HTML_Core.text("Modified") ]) ]);
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-list-view" ]), Halogen_HTML_Properties_ARIA.role("table") ])(append1([ headerRow ])(map(renderListItem)(fileList)));
    };
};

// | File grid component
// |
// | Grid view of files
var fileGrid = function (props) {
    return function (fileList) {
        var renderGridItem = function (entry) {
            var thumbnail = (function () {
                if (props.showThumbnails && entry.thumbnail instanceof Data_Maybe.Just) {
                    return Halogen_HTML_Elements.img([ Hydrogen_UI_Core.cls([ "w-full aspect-square rounded object-cover" ]), Halogen_HTML_Properties.src(entry.thumbnail.value0), Halogen_HTML_Properties.alt(entry.name) ]);
                };
                return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "w-full aspect-square rounded bg-muted flex items-center justify-center" ]) ])([ fileIcon(entry.type_) ]);
            })();
            var itemClasses = "file-grid-item flex flex-col items-center gap-2 p-3 rounded-lg cursor-pointer transition-all hover:bg-muted" + (function () {
                if (entry.selected) {
                    return " bg-accent ring-2 ring-primary";
                };
                return "";
            })();
            var dblClickHandler = (function () {
                if (props.onOpen instanceof Data_Maybe.Just) {
                    return [ Halogen_HTML_Events.onDoubleClick(function (v) {
                        return props.onOpen.value0(entry);
                    }) ];
                };
                if (props.onOpen instanceof Data_Maybe.Nothing) {
                    return [  ];
                };
                throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 683, column 27 - line 685, column 24): " + [ props.onOpen.constructor.name ]);
            })();
            var clickHandler = (function () {
                if (props.onSelect instanceof Data_Maybe.Just) {
                    return [ Halogen_HTML_Events.onClick(function (v) {
                        return props.onSelect.value0({
                            fileIds: [ entry.id ],
                            files: [ entry ]
                        });
                    }) ];
                };
                if (props.onSelect instanceof Data_Maybe.Nothing) {
                    return [  ];
                };
                throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 678, column 24 - line 681, column 24): " + [ props.onSelect.constructor.name ]);
            })();
            return Halogen_HTML_Elements.div(append1([ Hydrogen_UI_Core.cls([ itemClasses ]), Halogen_HTML_Properties.attr("data-file-id")(entry.id) ])(append1(clickHandler)(dblClickHandler)))([ thumbnail, Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "text-xs text-center truncate w-full" ]) ])([ Halogen_HTML_Core.text(entry.name) ]) ]);
        };
        var gridStyle = "grid-template-columns: repeat(auto-fill, minmax(" + (show(props.thumbnailSize) + "px, 1fr))");
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-grid grid gap-4" ]), Halogen_HTML_Properties.attr("style")(gridStyle), Halogen_HTML_Properties_ARIA.role("grid") ])(map(renderGridItem)(fileList));
    };
};

// | Set expanded folders
var expandedFolders = function (e) {
    return function (props) {
        return {
            folders: props.folders,
            currentPath: props.currentPath,
            className: props.className,
            onFolderSelect: props.onFolderSelect,
            onFolderExpand: props.onFolderExpand,
            onFolderCollapse: props.onFolderCollapse,
            expandedFolders: e
        };
    };
};
var eqViewMode = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Grid && y instanceof Grid) {
                return true;
            };
            if (x instanceof List && y instanceof List) {
                return true;
            };
            return false;
        };
    }
};
var eq2 = /* #__PURE__ */ Data_Eq.eq(eqViewMode);

// | Toolbar component
// |
// | Actions and view controls
var toolbar = function (props) {
    var viewModeBtn = function (mode) {
        return function (label$prime) {
            var isActive = eq2(props.viewMode)(mode);
            var btnClasses = "p-2 rounded transition-colors" + (function () {
                if (isActive) {
                    return " bg-accent text-accent-foreground";
                };
                return " hover:bg-muted";
            })();
            return Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ btnClasses ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Halogen_HTML_Properties_ARIA.label(label$prime) ])([ Halogen_HTML_Core.text((function () {
                var $82 = eq2(mode)(Grid.value);
                if ($82) {
                    return "G";
                };
                return "L";
            })()) ]);
        };
    };
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-browser-toolbar flex items-center justify-between gap-4 px-4 py-2 border-b" ]) ])([ Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center gap-2" ]) ])([ Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ "px-3 py-1.5 rounded text-sm bg-primary text-primary-foreground hover:bg-primary/90" ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value) ])([ Halogen_HTML_Core.text("+ New Folder") ]) ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center gap-2" ]) ])([ (function () {
        if (props.showSearch) {
            return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative" ]) ])([ Halogen_HTML_Elements.input([ Hydrogen_UI_Core.cls([ "h-8 w-48 pl-8 pr-3 rounded border border-input bg-background text-sm placeholder:text-muted-foreground" ]), type_1(DOM_HTML_Indexed_InputType.InputSearch.value), Halogen_HTML_Properties.placeholder("Search..."), value(props.searchQuery) ]), Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "absolute left-2.5 top-1/2 -translate-y-1/2 text-muted-foreground text-xs" ]) ])([ Halogen_HTML_Core.text("S") ]) ]);
        };
        return Halogen_HTML_Core.text("");
    })(), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "flex items-center border rounded overflow-hidden" ]) ])([ viewModeBtn(List.value)("List view"), viewModeBtn(Grid.value)("Grid view") ]) ]) ]);
};
var eqSortOrder = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Ascending && y instanceof Ascending) {
                return true;
            };
            if (x instanceof Descending && y instanceof Descending) {
                return true;
            };
            return false;
        };
    }
};
var eqSortField = {
    eq: function (x) {
        return function (y) {
            if (x instanceof SortByName && y instanceof SortByName) {
                return true;
            };
            if (x instanceof SortByDate && y instanceof SortByDate) {
                return true;
            };
            if (x instanceof SortBySize && y instanceof SortBySize) {
                return true;
            };
            if (x instanceof SortByType && y instanceof SortByType) {
                return true;
            };
            return false;
        };
    }
};
var eqFileType = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Folder && y instanceof Folder) {
                return true;
            };
            if (x instanceof Image && y instanceof Image) {
                return true;
            };
            if (x instanceof Video && y instanceof Video) {
                return true;
            };
            if (x instanceof Audio && y instanceof Audio) {
                return true;
            };
            if (x instanceof Document && y instanceof Document) {
                return true;
            };
            if (x instanceof Archive && y instanceof Archive) {
                return true;
            };
            if (x instanceof Code && y instanceof Code) {
                return true;
            };
            if (x instanceof Other && y instanceof Other) {
                return true;
            };
            return false;
        };
    }
};

// | Destroy browser
var destroyBrowser = function (v) {
    return pure(Data_Unit.unit);
};

// | Default tree properties
var defaultTreeProps = /* #__PURE__ */ (function () {
    return {
        folders: [  ],
        expandedFolders: [  ],
        currentPath: "/",
        className: "",
        onFolderSelect: Data_Maybe.Nothing.value,
        onFolderExpand: Data_Maybe.Nothing.value,
        onFolderCollapse: Data_Maybe.Nothing.value
    };
})();

// | File tree component
// |
// | Folder tree sidebar
var fileTree = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultTreeProps)(propMods);
    var renderFolder = function (folder) {
        var isActive = folder.path === props.currentPath;
        var itemClasses = "flex items-center gap-2 px-2 py-1.5 rounded cursor-pointer transition-colors hover:bg-muted" + (function () {
            if (isActive) {
                return " bg-accent text-accent-foreground";
            };
            return "";
        })();
        var folderIcon = Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "text-yellow-500" ]) ])([ Halogen_HTML_Core.text((function () {
            if (folder.expanded) {
                return "O";
            };
            return "F";
        })()) ]);
        var expandIcon = (function () {
            if (folder.hasChildren) {
                return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "w-4 h-4 flex items-center justify-center text-muted-foreground transition-transform", (function () {
                    if (folder.expanded) {
                        return "rotate-90";
                    };
                    return "";
                })() ]) ])([ Halogen_HTML_Core.text(">") ]);
            };
            return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "w-4 h-4" ]) ])([  ]);
        })();
        var clickHandler = (function () {
            if (props.onFolderSelect instanceof Data_Maybe.Just) {
                return [ Halogen_HTML_Events.onClick(function (v) {
                    return props.onFolderSelect.value0(folder.id);
                }) ];
            };
            if (props.onFolderSelect instanceof Data_Maybe.Nothing) {
                return [  ];
            };
            throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 627, column 24 - line 629, column 24): " + [ props.onFolderSelect.constructor.name ]);
        })();
        return Halogen_HTML_Elements.div_([ Halogen_HTML_Elements.div(append1([ Hydrogen_UI_Core.cls([ itemClasses ]) ])(clickHandler))([ expandIcon, folderIcon, Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "text-sm truncate" ]) ])([ Halogen_HTML_Core.text(folder.name) ]) ]) ]);
    };
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-tree p-2", props.className ]), Halogen_HTML_Properties_ARIA.role("tree") ])(map(renderFolder)(props.folders));
};

// | Default file browser properties
var defaultProps = /* #__PURE__ */ (function () {
    return {
        files: [  ],
        currentPath: "/",
        selectedFiles: [  ],
        viewMode: List.value,
        sortBy: SortByName.value,
        sortOrder: Ascending.value,
        showSidebar: true,
        sidebarWidth: 240,
        showBreadcrumbs: true,
        showToolbar: true,
        showSearch: true,
        searchQuery: "",
        showThumbnails: true,
        thumbnailSize: 80,
        multiSelect: true,
        contextMenuItems: [  ],
        className: "",
        onSelect: Data_Maybe.Nothing.value,
        onNavigate: Data_Maybe.Nothing.value,
        onOpen: Data_Maybe.Nothing.value,
        onCreate: Data_Maybe.Nothing.value,
        onRename: Data_Maybe.Nothing.value,
        onDelete: Data_Maybe.Nothing.value,
        onMove: Data_Maybe.Nothing.value,
        onCopy: Data_Maybe.Nothing.value,
        onSearchChange: Data_Maybe.Nothing.value
    };
})();

// | Set current path
var currentPath = function (p) {
    return function (props) {
        return {
            files: props.files,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            className: props.className,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            currentPath: p
        };
    };
};

// | Context menu component
// |
// | Right-click menu
var contextMenu = function (config) {
    var renderItem = function (item) {
        if (item instanceof MenuAction) {
            return Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ "flex items-center gap-2 w-full px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground text-left" ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Halogen_HTML_Events.onClick(function (v) {
                return item.value0.action;
            }) ])([ (function () {
                if (item.value0.icon instanceof Data_Maybe.Just) {
                    return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "w-4 h-4" ]) ])([ Halogen_HTML_Core.text(item.value0.icon.value0) ]);
                };
                if (item.value0.icon instanceof Data_Maybe.Nothing) {
                    return Halogen_HTML_Core.text("");
                };
                throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 908, column 13 - line 910, column 36): " + [ item.value0.icon.constructor.name ]);
            })(), Halogen_HTML_Core.text(item.value0.label) ]);
        };
        if (item instanceof MenuDivider) {
            return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "h-px bg-border my-1" ]) ])([  ]);
        };
        if (item instanceof MenuSubmenu) {
            return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative group" ]) ])([ Halogen_HTML_Elements.button([ Hydrogen_UI_Core.cls([ "flex items-center justify-between w-full px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground" ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value) ])([ Halogen_HTML_Core.text(item.value0.label), Halogen_HTML_Elements.span([  ])([ Halogen_HTML_Core.text(">") ]) ]) ]);
        };
        throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 901, column 23 - line 925, column 12): " + [ item.constructor.name ]);
    };
    var menuStyle = "left: " + (show1(config.x) + ("px; top: " + (show1(config.y) + "px")));
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-context-menu fixed z-50 min-w-[160px] bg-popover border rounded-md shadow-lg py-1" ]), Halogen_HTML_Properties.attr("style")(menuStyle), Halogen_HTML_Properties_ARIA.role("menu") ])(map(renderItem)(config.items));
};

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            files: props.files,
            currentPath: props.currentPath,
            selectedFiles: props.selectedFiles,
            viewMode: props.viewMode,
            sortBy: props.sortBy,
            sortOrder: props.sortOrder,
            showSidebar: props.showSidebar,
            sidebarWidth: props.sidebarWidth,
            showBreadcrumbs: props.showBreadcrumbs,
            showToolbar: props.showToolbar,
            showSearch: props.showSearch,
            searchQuery: props.searchQuery,
            showThumbnails: props.showThumbnails,
            thumbnailSize: props.thumbnailSize,
            multiSelect: props.multiSelect,
            contextMenuItems: props.contextMenuItems,
            onSelect: props.onSelect,
            onNavigate: props.onNavigate,
            onOpen: props.onOpen,
            onCreate: props.onCreate,
            onRename: props.onRename,
            onDelete: props.onDelete,
            onMove: props.onMove,
            onCopy: props.onCopy,
            onSearchChange: props.onSearchChange,
            className: props.className + (" " + c)
        };
    };
};

// | Breadcrumbs component
// |
// | Path navigation
var breadcrumbs = function (path) {
    return function (onNav) {
        var segments = $foreign.splitPathImpl(path);
        var renderCrumb = function (idx) {
            return function (segment) {
                var isLast = idx === (Data_Array.length(segments) - 1 | 0);
                var segmentClasses = (function () {
                    if (isLast) {
                        return "font-medium text-foreground";
                    };
                    return "text-muted-foreground hover:text-foreground cursor-pointer";
                })();
                var clickHandler = (function () {
                    if (onNav instanceof Data_Maybe.Just) {
                        if (isLast) {
                            return [  ];
                        };
                        return [ Halogen_HTML_Events.onClick(function (v) {
                            return onNav.value0($foreign.joinPathImpl($foreign.takeImpl(idx + 1 | 0)(segments)));
                        }) ];
                    };
                    if (onNav instanceof Data_Maybe.Nothing) {
                        return [  ];
                    };
                    throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 789, column 24 - line 794, column 24): " + [ onNav.constructor.name ]);
                })();
                return Halogen_HTML_Elements.span_([ Halogen_HTML_Elements.span(append1([ Hydrogen_UI_Core.cls([ segmentClasses ]) ])(clickHandler))([ Halogen_HTML_Core.text(segment) ]), (function () {
                    if (isLast) {
                        return Halogen_HTML_Core.text("");
                    };
                    return Halogen_HTML_Elements.span([ Hydrogen_UI_Core.cls([ "text-muted-foreground mx-1" ]) ])([ Halogen_HTML_Core.text("/") ]);
                })() ]);
            };
        };
        return Halogen_HTML_Elements.nav([ Hydrogen_UI_Core.cls([ "breadcrumbs flex items-center gap-1 px-4 py-2 text-sm" ]), Halogen_HTML_Properties_ARIA.label("Breadcrumb") ])($foreign.mapWithIndexImpl(renderCrumb)(segments));
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // components
// ═══════════════════════════════════════════════════════════════════════════════
// | File browser component
// |
// | Complete file manager interface
var fileBrowser = function (propMods) {
    var filterBySearch = function (query) {
        return function (fs) {
            return $foreign.filterImpl(function (f) {
                return $foreign.containsImpl($foreign.toLowerImpl(f.name))($foreign.toLowerImpl(query));
            })(fs);
        };
    };
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultProps)(propMods);
    var sidebarStyle = "width: " + (show(props.sidebarWidth) + "px");
    
    // Filter files by search query
var filteredFiles = (function () {
        var $111 = props.searchQuery === "";
        if ($111) {
            return props.files;
        };
        return filterBySearch(props.searchQuery)(props.files);
    })();
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-browser flex h-full bg-background", props.className ]), Halogen_HTML_Properties.attr("data-file-browser")("true") ])([ (function () {
        if (props.showSidebar) {
            return Halogen_HTML_Elements.aside([ Hydrogen_UI_Core.cls([ "file-browser-sidebar border-r bg-card shrink-0 overflow-auto" ]), Halogen_HTML_Properties.attr("style")(sidebarStyle) ])([ fileTree([  ]) ]);
        };
        return Halogen_HTML_Core.text("");
    })(), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-browser-content flex-1 flex flex-col min-w-0" ]) ])([ (function () {
        if (props.showToolbar) {
            return toolbar(props);
        };
        return Halogen_HTML_Core.text("");
    })(), (function () {
        if (props.showBreadcrumbs) {
            return breadcrumbs(props.currentPath)(Data_Maybe.Nothing.value);
        };
        return Halogen_HTML_Core.text("");
    })(), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-browser-files flex-1 overflow-auto p-4" ]) ])([ (function () {
        if (props.viewMode instanceof Grid) {
            return fileGrid(props)(filteredFiles);
        };
        if (props.viewMode instanceof List) {
            return fileListView(props)(filteredFiles);
        };
        throw new Error("Failed pattern match at Hydrogen.Media.FileBrowser (line 568, column 17 - line 570, column 59): " + [ props.viewMode.constructor.name ]);
    })() ]), Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "file-browser-status flex items-center justify-between px-4 py-2 border-t text-xs text-muted-foreground" ]) ])([ Halogen_HTML_Elements.span_([ Halogen_HTML_Core.text(show(Data_Array.length(filteredFiles)) + " items") ]), Halogen_HTML_Elements.span_([ Halogen_HTML_Core.text(show(Data_Array.length(props.selectedFiles)) + " selected") ]) ]) ]) ]);
};
export {
    fileBrowser,
    fileTree,
    fileGrid,
    fileListView,
    breadcrumbs,
    toolbar,
    contextMenu,
    defaultProps,
    defaultTreeProps,
    files,
    currentPath,
    selectedFiles,
    viewMode,
    sortBy,
    sortOrder,
    showSidebar,
    sidebarWidth,
    showBreadcrumbs,
    showToolbar,
    showSearch,
    searchQuery,
    showThumbnails,
    thumbnailSize,
    multiSelect,
    className,
    onSelect,
    onNavigate,
    onOpen,
    onCreate,
    onRename,
    onDelete,
    onMove,
    onCopy,
    onSearchChange,
    folders,
    expandedFolders,
    treeClassName,
    onFolderSelect,
    onFolderExpand,
    onFolderCollapse,
    Grid,
    List,
    SortByName,
    SortByDate,
    SortBySize,
    SortByType,
    Ascending,
    Descending,
    MenuAction,
    MenuDivider,
    MenuSubmenu,
    Folder,
    Image,
    Video,
    Audio,
    Document,
    Archive,
    Code,
    Other,
    initBrowser,
    destroyBrowser,
    selectAll,
    selectNone,
    invertSelection,
    eqViewMode,
    eqSortField,
    eqSortOrder,
    eqFileType
};
