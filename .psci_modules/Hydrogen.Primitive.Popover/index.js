// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                        // hydrogen // popover
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Popover component
// |
// | Positioned floating content panels with trigger elements.
// | Supports multiple placement options, auto-flip, click outside/escape
// | handling, focus management, and portal rendering.
// |
// | ## Features
// |
// | - **Trigger element**: Click or hover to open
// | - **Content panel**: Positioned floating content with optional arrow
// | - **Placement**: top, bottom, left, right with start/end/center alignment
// | - **Auto-flip**: Automatically flip when hitting viewport edges
// | - **Close behaviors**: Click outside, escape key
// | - **Focus management**: Trap focus within popover content
// | - **Portal rendering**: Render to document body for proper stacking
// | - **Controlled/Uncontrolled**: Use with or without external state
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Primitive.Popover as Popover
// |
// | -- Uncontrolled (internal state)
// | Popover.popover []
// |   [ Popover.popoverTrigger [ Popover.triggerMode Popover.Click ]
// |       [ Button.button [] [ HH.text "Open" ] ]
// |   , Popover.popoverContent [ Popover.placement Popover.BottomCenter ]
// |       [ Popover.popoverArrow []
// |       , HH.div_ [ HH.text "Popover content" ]
// |       ]
// |   ]
// |
// | -- Controlled (external state)
// | Popover.popover [ Popover.open state.isOpen ]
// |   [ Popover.popoverTrigger [ Popover.onToggle TogglePopover ]
// |       [ Button.button [] [ HH.text "Open" ] ]
// |   , Popover.popoverContent
// |       [ Popover.placement Popover.TopCenter
// |       , Popover.onClose ClosePopover
// |       , Popover.closeOnEscape true
// |       , Popover.closeOnClickOutside true
// |       ]
// |       [ HH.text "Popover content" ]
// |   ]
// | ```
import * as DOM_HTML_Indexed_ButtonType from "../DOM.HTML.Indexed.ButtonType/index.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Semigroup from "../Data.Semigroup/index.js";
import * as Halogen_HTML_Core from "../Halogen.HTML.Core/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Events from "../Halogen.HTML.Events/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var append = /* #__PURE__ */ Data_Semigroup.append(Data_Semigroup.semigroupArray);
var type_ = /* #__PURE__ */ Halogen_HTML_Properties.type_(Halogen_HTML_Core.isPropButtonType);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // trigger mode
// ═══════════════════════════════════════════════════════════════════════════════
// | How the popover is triggered
var Click = /* #__PURE__ */ (function () {
    function Click() {

    };
    Click.value = new Click();
    return Click;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // trigger mode
// ═══════════════════════════════════════════════════════════════════════════════
// | How the popover is triggered
var Hover = /* #__PURE__ */ (function () {
    function Hover() {

    };
    Hover.value = new Hover();
    return Hover;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // trigger mode
// ═══════════════════════════════════════════════════════════════════════════════
// | How the popover is triggered
var Focus = /* #__PURE__ */ (function () {
    function Focus() {

    };
    Focus.value = new Focus();
    return Focus;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // trigger mode
// ═══════════════════════════════════════════════════════════════════════════════
// | How the popover is triggered
var Manual = /* #__PURE__ */ (function () {
    function Manual() {

    };
    Manual.value = new Manual();
    return Manual;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var TopStart = /* #__PURE__ */ (function () {
    function TopStart() {

    };
    TopStart.value = new TopStart();
    return TopStart;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var TopCenter = /* #__PURE__ */ (function () {
    function TopCenter() {

    };
    TopCenter.value = new TopCenter();
    return TopCenter;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var TopEnd = /* #__PURE__ */ (function () {
    function TopEnd() {

    };
    TopEnd.value = new TopEnd();
    return TopEnd;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var BottomStart = /* #__PURE__ */ (function () {
    function BottomStart() {

    };
    BottomStart.value = new BottomStart();
    return BottomStart;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var BottomCenter = /* #__PURE__ */ (function () {
    function BottomCenter() {

    };
    BottomCenter.value = new BottomCenter();
    return BottomCenter;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var BottomEnd = /* #__PURE__ */ (function () {
    function BottomEnd() {

    };
    BottomEnd.value = new BottomEnd();
    return BottomEnd;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var LeftStart = /* #__PURE__ */ (function () {
    function LeftStart() {

    };
    LeftStart.value = new LeftStart();
    return LeftStart;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var LeftCenter = /* #__PURE__ */ (function () {
    function LeftCenter() {

    };
    LeftCenter.value = new LeftCenter();
    return LeftCenter;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var LeftEnd = /* #__PURE__ */ (function () {
    function LeftEnd() {

    };
    LeftEnd.value = new LeftEnd();
    return LeftEnd;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var RightStart = /* #__PURE__ */ (function () {
    function RightStart() {

    };
    RightStart.value = new RightStart();
    return RightStart;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var RightCenter = /* #__PURE__ */ (function () {
    function RightCenter() {

    };
    RightCenter.value = new RightCenter();
    return RightCenter;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                   // placement
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover placement options
// |
// | Supports 12 positions: 4 sides × 3 alignments (start, center, end)
var RightEnd = /* #__PURE__ */ (function () {
    function RightEnd() {

    };
    RightEnd.value = new RightEnd();
    return RightEnd;
})();

// | Set trigger mode (click, hover, focus, manual)
var triggerMode = function (mode) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            triggerMode: mode
        };
    };
};

// | Trap focus within popover content
var trapFocus = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            trapFocus: enabled
        };
    };
};

// | Show arrow pointing to trigger
var showArrow = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            showArrow: enabled
        };
    };
};

// | Render content through portal (at document body)
var portal = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            className: props.className,
            portal: enabled
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                     // helpers
// ═══════════════════════════════════════════════════════════════════════════════
// | Extract side from placement
var placementToSide = function (v) {
    if (v instanceof TopStart) {
        return "top";
    };
    if (v instanceof TopCenter) {
        return "top";
    };
    if (v instanceof TopEnd) {
        return "top";
    };
    if (v instanceof BottomStart) {
        return "bottom";
    };
    if (v instanceof BottomCenter) {
        return "bottom";
    };
    if (v instanceof BottomEnd) {
        return "bottom";
    };
    if (v instanceof LeftStart) {
        return "left";
    };
    if (v instanceof LeftCenter) {
        return "left";
    };
    if (v instanceof LeftEnd) {
        return "left";
    };
    if (v instanceof RightStart) {
        return "right";
    };
    if (v instanceof RightCenter) {
        return "right";
    };
    if (v instanceof RightEnd) {
        return "right";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 374, column 19 - line 386, column 26): " + [ v.constructor.name ]);
};

// | Extract alignment from placement
var placementToAlign = function (v) {
    if (v instanceof TopStart) {
        return "start";
    };
    if (v instanceof TopCenter) {
        return "center";
    };
    if (v instanceof TopEnd) {
        return "end";
    };
    if (v instanceof BottomStart) {
        return "start";
    };
    if (v instanceof BottomCenter) {
        return "center";
    };
    if (v instanceof BottomEnd) {
        return "end";
    };
    if (v instanceof LeftStart) {
        return "start";
    };
    if (v instanceof LeftCenter) {
        return "center";
    };
    if (v instanceof LeftEnd) {
        return "end";
    };
    if (v instanceof RightStart) {
        return "start";
    };
    if (v instanceof RightCenter) {
        return "center";
    };
    if (v instanceof RightEnd) {
        return "end";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 390, column 20 - line 402, column 24): " + [ v.constructor.name ]);
};

// | Get CSS classes for placement
var placementClasses = function (v) {
    if (v instanceof TopStart) {
        return "bottom-full left-0 mb-2";
    };
    if (v instanceof TopCenter) {
        return "bottom-full left-1/2 -translate-x-1/2 mb-2";
    };
    if (v instanceof TopEnd) {
        return "bottom-full right-0 mb-2";
    };
    if (v instanceof BottomStart) {
        return "top-full left-0 mt-2";
    };
    if (v instanceof BottomCenter) {
        return "top-full left-1/2 -translate-x-1/2 mt-2";
    };
    if (v instanceof BottomEnd) {
        return "top-full right-0 mt-2";
    };
    if (v instanceof LeftStart) {
        return "right-full top-0 mr-2";
    };
    if (v instanceof LeftCenter) {
        return "right-full top-1/2 -translate-y-1/2 mr-2";
    };
    if (v instanceof LeftEnd) {
        return "right-full bottom-0 mr-2";
    };
    if (v instanceof RightStart) {
        return "left-full top-0 ml-2";
    };
    if (v instanceof RightCenter) {
        return "left-full top-1/2 -translate-y-1/2 ml-2";
    };
    if (v instanceof RightEnd) {
        return "left-full bottom-0 ml-2";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 116, column 20 - line 128, column 44): " + [ v.constructor.name ]);
};

// | Set placement (where content appears relative to trigger)
var placement = function (p) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            placement: p
        };
    };
};

// | Set open state (for controlled mode)
var open = function (o) {
    return function (props) {
        return {
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            open: o
        };
    };
};

// | Set toggle handler
var onToggle = function (handler) {
    return function (props) {
        return {
            open: props.open,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            onToggle: new Data_Maybe.Just(handler)
        };
    };
};

// | Set close handler
var onClose = function (handler) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            onClose: new Data_Maybe.Just(handler)
        };
    };
};

// | Offset from trigger (in pixels)
var offset = function (n) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            offset: n
        };
    };
};
var eqTriggerMode = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Click && y instanceof Click) {
                return true;
            };
            if (x instanceof Hover && y instanceof Hover) {
                return true;
            };
            if (x instanceof Focus && y instanceof Focus) {
                return true;
            };
            if (x instanceof Manual && y instanceof Manual) {
                return true;
            };
            return false;
        };
    }
};
var eqPlacement = {
    eq: function (x) {
        return function (y) {
            if (x instanceof TopStart && y instanceof TopStart) {
                return true;
            };
            if (x instanceof TopCenter && y instanceof TopCenter) {
                return true;
            };
            if (x instanceof TopEnd && y instanceof TopEnd) {
                return true;
            };
            if (x instanceof BottomStart && y instanceof BottomStart) {
                return true;
            };
            if (x instanceof BottomCenter && y instanceof BottomCenter) {
                return true;
            };
            if (x instanceof BottomEnd && y instanceof BottomEnd) {
                return true;
            };
            if (x instanceof LeftStart && y instanceof LeftStart) {
                return true;
            };
            if (x instanceof LeftCenter && y instanceof LeftCenter) {
                return true;
            };
            if (x instanceof LeftEnd && y instanceof LeftEnd) {
                return true;
            };
            if (x instanceof RightStart && y instanceof RightStart) {
                return true;
            };
            if (x instanceof RightCenter && y instanceof RightCenter) {
                return true;
            };
            if (x instanceof RightEnd && y instanceof RightEnd) {
                return true;
            };
            return false;
        };
    }
};
var defaultProps = /* #__PURE__ */ (function () {
    return {
        open: false,
        onToggle: Data_Maybe.Nothing.value,
        onClose: Data_Maybe.Nothing.value,
        placement: BottomCenter.value,
        triggerMode: Click.value,
        closeOnEscape: true,
        closeOnClickOutside: true,
        trapFocus: false,
        showArrow: true,
        offset: 8,
        autoFlip: true,
        portal: false,
        className: ""
    };
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // components
// ═══════════════════════════════════════════════════════════════════════════════
// | Popover container
// |
// | Wraps the trigger and content elements.
// | In uncontrolled mode, manages open state internally via CSS :focus-within.
var popover = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative inline-block", props.className ]), Halogen_HTML_Properties.attr("data-state")((function () {
            if (props.open) {
                return "open";
            };
            return "closed";
        })()), Halogen_HTML_Properties.attr("data-popover")("root"), Halogen_HTML_Properties.attr("data-close-on-escape")((function () {
            if (props.closeOnEscape) {
                return "true";
            };
            return "false";
        })()), Halogen_HTML_Properties.attr("data-close-on-click-outside")((function () {
            if (props.closeOnClickOutside) {
                return "true";
            };
            return "false";
        })()), Halogen_HTML_Properties.attr("data-auto-flip")((function () {
            if (props.autoFlip) {
                return "true";
            };
            return "false";
        })()) ])(children);
    };
};

// | Popover content panel
// |
// | The floating content that appears when popover is open.
// | Supports placement, arrow, and focus trapping.
var popoverContent = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        var visibilityClass = (function () {
            if (props.open) {
                return "opacity-100 scale-100";
            };
            return "opacity-0 scale-95 pointer-events-none";
        })();
        var portalAttr = (function () {
            if (props.portal) {
                return "true";
            };
            return "false";
        })();
        var focusTrapAttr = (function () {
            if (props.trapFocus) {
                return "true";
            };
            return "false";
        })();
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none", "transition-all duration-200 ease-out", "animate-in fade-in-0 zoom-in-95", placementClasses(props.placement), visibilityClass, props.className ]), Halogen_HTML_Properties_ARIA.role("dialog"), Halogen_HTML_Properties.attr("data-state")((function () {
            if (props.open) {
                return "open";
            };
            return "closed";
        })()), Halogen_HTML_Properties.attr("data-side")(placementToSide(props.placement)), Halogen_HTML_Properties.attr("data-align")(placementToAlign(props.placement)), Halogen_HTML_Properties.attr("data-popover")("content"), Halogen_HTML_Properties.attr("data-trap-focus")(focusTrapAttr), Halogen_HTML_Properties.attr("data-portal")(portalAttr) ])(children);
    };
};

// | Popover trigger element
// |
// | The element that opens the popover when interacted with.
var popoverTrigger = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        var triggerModeAttr = (function () {
            if (props.triggerMode instanceof Click) {
                return "click";
            };
            if (props.triggerMode instanceof Hover) {
                return "hover";
            };
            if (props.triggerMode instanceof Focus) {
                return "focus";
            };
            if (props.triggerMode instanceof Manual) {
                return "manual";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 278, column 23 - line 282, column 25): " + [ props.triggerMode.constructor.name ]);
        })();
        return Halogen_HTML_Elements.div(append([ Hydrogen_UI_Core.cls([ "inline-flex", props.className ]), Halogen_HTML_Properties_ARIA.hasPopup("dialog"), Halogen_HTML_Properties_ARIA.expanded((function () {
            if (props.open) {
                return "true";
            };
            return "false";
        })()), Halogen_HTML_Properties.attr("data-popover")("trigger"), Halogen_HTML_Properties.attr("data-trigger-mode")(triggerModeAttr) ])((function () {
            if (props.onToggle instanceof Data_Maybe.Just) {
                return [ Halogen_HTML_Events.onClick(props.onToggle.value0) ];
            };
            if (props.onToggle instanceof Data_Maybe.Nothing) {
                return [  ];
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 290, column 14 - line 292, column 24): " + [ props.onToggle.constructor.name ]);
        })()))(children);
    };
};

// | Close popover when Escape key is pressed
var closeOnEscape = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            closeOnEscape: enabled
        };
    };
};

// | Close popover when clicking outside
var closeOnClickOutside = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className,
            closeOnClickOutside: enabled
        };
    };
};

// | Default close icon (X)
var closeIcon = /* #__PURE__ */ Halogen_HTML_Elements.elementNS("http://www.w3.org/2000/svg")("svg")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("class")("h-4 w-4"), /* #__PURE__ */ Halogen_HTML_Properties.attr("viewBox")("0 0 24 24"), /* #__PURE__ */ Halogen_HTML_Properties.attr("fill")("none"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke")("currentColor"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-width")("2"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linecap")("round"), /* #__PURE__ */ Halogen_HTML_Properties.attr("stroke-linejoin")("round") ])([ /* #__PURE__ */ Halogen_HTML_Elements.elementNS("http://www.w3.org/2000/svg")("line")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("x1")("18"), /* #__PURE__ */ Halogen_HTML_Properties.attr("y1")("6"), /* #__PURE__ */ Halogen_HTML_Properties.attr("x2")("6"), /* #__PURE__ */ Halogen_HTML_Properties.attr("y2")("18") ])([  ]), /* #__PURE__ */ Halogen_HTML_Elements.elementNS("http://www.w3.org/2000/svg")("line")([ /* #__PURE__ */ Halogen_HTML_Properties.attr("x1")("6"), /* #__PURE__ */ Halogen_HTML_Properties.attr("y1")("6"), /* #__PURE__ */ Halogen_HTML_Properties.attr("x2")("18"), /* #__PURE__ */ Halogen_HTML_Properties.attr("y2")("18") ])([  ]) ]);

// | Popover close button
// |
// | Optional close button within popover content.
var popoverClose = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        return Halogen_HTML_Elements.button(append([ Hydrogen_UI_Core.cls([ "absolute right-2 top-2 rounded-sm opacity-70 ring-offset-background transition-opacity", "hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2", "disabled:pointer-events-none", props.className ]), type_(DOM_HTML_Indexed_ButtonType.ButtonButton.value), Halogen_HTML_Properties.attr("data-popover")("close") ])((function () {
            if (props.onClose instanceof Data_Maybe.Just) {
                return [ Halogen_HTML_Events.onClick(props.onClose.value0) ];
            };
            if (props.onClose instanceof Data_Maybe.Nothing) {
                return [  ];
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 359, column 12 - line 361, column 22): " + [ props.onClose.constructor.name ]);
        })()))((function () {
            var $45 = Data_Array["null"](children);
            if ($45) {
                return [ closeIcon ];
            };
            return children;
        })());
    };
};

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            autoFlip: props.autoFlip,
            portal: props.portal,
            className: props.className + (" " + c)
        };
    };
};

// | Auto-flip placement when hitting viewport edges
var autoFlip = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onToggle: props.onToggle,
            onClose: props.onClose,
            placement: props.placement,
            triggerMode: props.triggerMode,
            closeOnEscape: props.closeOnEscape,
            closeOnClickOutside: props.closeOnClickOutside,
            trapFocus: props.trapFocus,
            showArrow: props.showArrow,
            offset: props.offset,
            portal: props.portal,
            className: props.className,
            autoFlip: enabled
        };
    };
};

// | Get arrow position classes based on popover placement
var arrowClasses = function (v) {
    if (v instanceof TopStart) {
        return "bottom-0 left-4 translate-y-1/2 rotate-45";
    };
    if (v instanceof TopCenter) {
        return "bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45";
    };
    if (v instanceof TopEnd) {
        return "bottom-0 right-4 translate-y-1/2 rotate-45";
    };
    if (v instanceof BottomStart) {
        return "top-0 left-4 -translate-y-1/2 rotate-45";
    };
    if (v instanceof BottomCenter) {
        return "top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 rotate-45";
    };
    if (v instanceof BottomEnd) {
        return "top-0 right-4 -translate-y-1/2 rotate-45";
    };
    if (v instanceof LeftStart) {
        return "right-0 top-4 translate-x-1/2 rotate-45";
    };
    if (v instanceof LeftCenter) {
        return "right-0 top-1/2 -translate-y-1/2 translate-x-1/2 rotate-45";
    };
    if (v instanceof LeftEnd) {
        return "right-0 bottom-4 translate-x-1/2 rotate-45";
    };
    if (v instanceof RightStart) {
        return "left-0 top-4 -translate-x-1/2 rotate-45";
    };
    if (v instanceof RightCenter) {
        return "left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 rotate-45";
    };
    if (v instanceof RightEnd) {
        return "left-0 bottom-4 -translate-x-1/2 rotate-45";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.Popover (line 132, column 16 - line 144, column 63): " + [ v.constructor.name ]);
};

// | Popover arrow
// |
// | Visual arrow pointing to the trigger element.
// | Position is automatically determined by popover placement.
var popoverArrow = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultProps)(propMods);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute w-2 h-2 bg-popover border border-border", arrowClasses(props.placement), props.className ]), Halogen_HTML_Properties.attr("data-popover")("arrow") ])([  ]);
};
export {
    popover,
    popoverTrigger,
    popoverContent,
    popoverArrow,
    popoverClose,
    open,
    onToggle,
    onClose,
    className,
    TopStart,
    TopCenter,
    TopEnd,
    BottomStart,
    BottomCenter,
    BottomEnd,
    LeftStart,
    LeftCenter,
    LeftEnd,
    RightStart,
    RightCenter,
    RightEnd,
    placement,
    Click,
    Hover,
    Focus,
    Manual,
    triggerMode,
    closeOnEscape,
    closeOnClickOutside,
    trapFocus,
    showArrow,
    offset,
    autoFlip,
    portal,
    eqPlacement,
    eqTriggerMode
};
