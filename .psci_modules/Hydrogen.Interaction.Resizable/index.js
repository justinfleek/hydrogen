// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                      // hydrogen // resizable
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Resizable panels
// |
// | Resizable panel components with drag handles, min/max constraints,
// | keyboard support, persistence, and collapse functionality.
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Interaction.Resizable as Resizable
// |
// | -- Basic resizable layout
// | Resizable.resizableContainer
// |   [ Resizable.direction Resizable.Horizontal
// |   , Resizable.onResize handleResize
// |   ]
// |   [ Resizable.resizablePanel
// |       [ Resizable.defaultSize "300px"
// |       , Resizable.minSize 200
// |       , Resizable.maxSize 500
// |       ]
// |       [ sidebar ]
// |   , Resizable.resizeHandle []
// |   , Resizable.resizablePanel
// |       [ Resizable.flexGrow true ]
// |       [ mainContent ]
// |   ]
// |
// | -- Vertical layout
// | Resizable.resizableContainer
// |   [ Resizable.direction Resizable.Vertical ]
// |   [ Resizable.resizablePanel [ Resizable.minSize 100 ] [ header ]
// |   , Resizable.resizeHandle []
// |   , Resizable.resizablePanel [ Resizable.flexGrow true ] [ content ]
// |   , Resizable.resizeHandle []
// |   , Resizable.resizablePanel [ Resizable.minSize 50 ] [ footer ]
// |   ]
// |
// | -- Collapsible panel
// | Resizable.resizablePanel
// |   [ Resizable.collapsible true
// |   , Resizable.collapsed state.sidebarCollapsed
// |   , Resizable.onCollapse HandleCollapse
// |   ]
// |   [ sidebar ]
// |
// | -- Persist sizes across sessions
// | Resizable.resizableContainer
// |   [ Resizable.persistKey "my-layout"
// |   ]
// |   panels
// |
// | -- Keyboard support
// | -- Focus handle, use arrow keys to resize, Home/End to collapse
// | -- Double-click handle to reset to default size
// | ```
import * as $foreign from "./foreign.js";
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showNumber);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                      // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Resize direction
var Horizontal = /* #__PURE__ */ (function () {
    function Horizontal() {

    };
    Horizontal.value = new Horizontal();
    return Horizontal;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                      // types
// ═══════════════════════════════════════════════════════════════════════════════
// | Resize direction
var Vertical = /* #__PURE__ */ (function () {
    function Vertical() {

    };
    Vertical.value = new Vertical();
    return Vertical;
})();
var savePanelSizes = $foreign.savePanelSizesImpl;

// | Storage key for persisting sizes
var persistKey = function (key) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            keyboardStep: props.keyboardStep,
            className: props.className,
            persistKey: new Data_Maybe.Just(key)
        };
    };
};

// | Set panel identifier
var panelId = function (id) {
    return function (props) {
        return {
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            id: id
        };
    };
};

// | Add custom class to panel
var panelClassName = function (c) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className + (" " + c)
        };
    };
};

// | Handler for resize start
var onResizeStart = function (handler) {
    return function (props) {
        return {
            direction: props.direction,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className,
            onResizeStart: new Data_Maybe.Just(handler)
        };
    };
};

// | Handler for resize end
var onResizeEnd = function (handler) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onReset: props.onReset,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className,
            onResizeEnd: new Data_Maybe.Just(handler)
        };
    };
};

// | Handler for resize movement
var onResize = function (handler) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className,
            onResize: new Data_Maybe.Just(handler)
        };
    };
};

// | Handler for reset (double-click)
var onReset = function (handler) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className,
            onReset: new Data_Maybe.Just(handler)
        };
    };
};

// | Handler for collapse state change
var onCollapse = function (handler) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            className: props.className,
            onCollapse: new Data_Maybe.Just(handler)
        };
    };
};

// | Set minimum size (pixels)
var minSize = function (size) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            minSize: new Data_Maybe.Just(size)
        };
    };
};

// | Set maximum size (pixels)
var maxSize = function (size) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            maxSize: new Data_Maybe.Just(size)
        };
    };
};
var loadPanelSizes = $foreign.loadPanelSizesImpl;

// | Step size for keyboard resizing (pixels)
var keyboardStep = function (step) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            persistKey: props.persistKey,
            className: props.className,
            keyboardStep: step
        };
    };
};
var isPanelCollapsed = $foreign.isPanelCollapsedImpl;

// | Add custom class to handle
var handleClassName = function (c) {
    return function (props) {
        return {
            className: props.className + (" " + c)
        };
    };
};
var getResizeState = $foreign.getResizeStateImpl;

// | Allow panel to grow to fill space
var flexGrow = function (grow) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            flexGrow: grow
        };
    };
};
var eqDirection = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Horizontal && y instanceof Horizontal) {
                return true;
            };
            if (x instanceof Vertical && y instanceof Vertical) {
                return true;
            };
            return false;
        };
    }
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // internal
// ═══════════════════════════════════════════════════════════════════════════════
var directionToString = function (v) {
    if (v instanceof Horizontal) {
        return "horizontal";
    };
    if (v instanceof Vertical) {
        return "vertical";
    };
    throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 510, column 21 - line 512, column 25): " + [ v.constructor.name ]);
};
var expandPanel = function (panel) {
    return function (dir) {
        return function (size) {
            return $foreign.expandPanelImpl(panel)(directionToString(dir))(size);
        };
    };
};
var getPanelSize = function (panel) {
    return function (dir) {
        return $foreign.getPanelSizeImpl(panel)(directionToString(dir));
    };
};
var setPanelSize = function (panel) {
    return function (dir) {
        return function (size) {
            return $foreign.setPanelSizeImpl(panel)(directionToString(dir))(size);
        };
    };
};

// | Set resize direction
var direction = function (dir) {
    return function (props) {
        return {
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className,
            direction: dir
        };
    };
};

// | Set default size (CSS value)
var defaultSize = function (size) {
    return function (props) {
        return {
            id: props.id,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            defaultSize: new Data_Maybe.Just(size)
        };
    };
};
var defaultResizeHandleProps = {
    className: ""
};

// | Resize handle
// |
// | Drag this element to resize adjacent panels. Supports keyboard navigation.
var resizeHandle = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultResizeHandleProps)(propMods);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative flex-shrink-0", "group", "bg-border hover:bg-primary/50 active:bg-primary", "transition-colors duration-150", "[data-direction=horizontal]_&:cursor-col-resize", "[data-direction=vertical]_&:cursor-row-resize", "[data-direction=horizontal]_&:w-1 [data-direction=horizontal]_&:h-full", "[data-direction=vertical]_&:h-1 [data-direction=vertical]_&:w-full", "[&[data-resizing=true]]:bg-primary", "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2", props.className ]), Halogen_HTML_Properties.attr("data-resize-handle")("true"), Halogen_HTML_Properties.tabIndex(0), Halogen_HTML_Properties_ARIA.role("separator"), Halogen_HTML_Properties_ARIA.label("Resize handle. Use arrow keys to resize, Home to collapse left, End to collapse right, double-click to reset."), Halogen_HTML_Properties.attr("aria-valuenow")("50"), Halogen_HTML_Properties.attr("aria-valuemin")("0"), Halogen_HTML_Properties.attr("aria-valuemax")("100") ])([  ]);
};
var defaultResizablePanelProps = /* #__PURE__ */ (function () {
    return {
        id: "",
        defaultSize: Data_Maybe.Nothing.value,
        minSize: Data_Maybe.Nothing.value,
        maxSize: Data_Maybe.Nothing.value,
        flexGrow: false,
        collapsible: false,
        collapsed: false,
        onCollapse: Data_Maybe.Nothing.value,
        className: ""
    };
})();

// | Resizable panel
// |
// | A panel that can be resized by dragging adjacent handles.
var resizablePanel = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultResizablePanelProps)(propMods);
        var sizeStyle = (function () {
            if (props.defaultSize instanceof Data_Maybe.Just) {
                return "flex-basis: " + (props.defaultSize.value0 + ";");
            };
            if (props.defaultSize instanceof Data_Maybe.Nothing) {
                return "";
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 366, column 19 - line 368, column 22): " + [ props.defaultSize.constructor.name ]);
        })();
        var flexStyle = (function () {
            if (props.flexGrow) {
                return "flex-grow: 1; flex-shrink: 1;";
            };
            return "flex-grow: 0; flex-shrink: 0;";
        })();
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "overflow-auto", (function () {
            if (props.collapsed) {
                return "hidden";
            };
            return "";
        })(), props.className ]), Halogen_HTML_Properties.attr("data-resizable-panel")(props.id), (function () {
            if (props.minSize instanceof Data_Maybe.Just) {
                return Halogen_HTML_Properties.attr("data-min-size")(show(props.minSize.value0));
            };
            if (props.minSize instanceof Data_Maybe.Nothing) {
                return Halogen_HTML_Properties.attr("data-min-size")("0");
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 379, column 7 - line 381, column 61): " + [ props.minSize.constructor.name ]);
        })(), (function () {
            if (props.maxSize instanceof Data_Maybe.Just) {
                return Halogen_HTML_Properties.attr("data-max-size")(show(props.maxSize.value0));
            };
            if (props.maxSize instanceof Data_Maybe.Nothing) {
                return Halogen_HTML_Properties.attr("data-max-size")("");
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 382, column 7 - line 384, column 60): " + [ props.maxSize.constructor.name ]);
        })(), (function () {
            if (props.defaultSize instanceof Data_Maybe.Just) {
                return Halogen_HTML_Properties.attr("data-default-size")(props.defaultSize.value0);
            };
            if (props.defaultSize instanceof Data_Maybe.Nothing) {
                return Halogen_HTML_Properties.attr("data-default-size")("");
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 385, column 7 - line 387, column 64): " + [ props.defaultSize.constructor.name ]);
        })(), (function () {
            if (props.collapsible) {
                return Halogen_HTML_Properties.attr("data-collapsible")("true");
            };
            return Halogen_HTML_Properties.attr("data-collapsible")("false");
        })(), (function () {
            if (props.collapsed) {
                return Halogen_HTML_Properties.attr("data-collapsed")("true");
            };
            return Halogen_HTML_Properties.attr("data-collapsed")("false");
        })(), Halogen_HTML_Properties.style(sizeStyle + (" " + flexStyle)) ])(children);
    };
};
var defaultResizableContainerProps = /* #__PURE__ */ (function () {
    return {
        direction: Horizontal.value,
        onResizeStart: Data_Maybe.Nothing.value,
        onResize: Data_Maybe.Nothing.value,
        onResizeEnd: Data_Maybe.Nothing.value,
        onReset: Data_Maybe.Nothing.value,
        persistKey: Data_Maybe.Nothing.value,
        keyboardStep: 10,
        className: ""
    };
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // components
// ═══════════════════════════════════════════════════════════════════════════════
// | Resizable container
// |
// | Contains resizable panels with handles between them.
var resizableContainer = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultResizableContainerProps)(propMods);
        var dirClass = (function () {
            if (props.direction instanceof Horizontal) {
                return "flex flex-row";
            };
            if (props.direction instanceof Vertical) {
                return "flex flex-col";
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 338, column 18 - line 340, column 36): " + [ props.direction.constructor.name ]);
        })();
        var dirAttr = (function () {
            if (props.direction instanceof Horizontal) {
                return "horizontal";
            };
            if (props.direction instanceof Vertical) {
                return "vertical";
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 341, column 17 - line 343, column 31): " + [ props.direction.constructor.name ]);
        })();
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ dirClass, "w-full h-full", "overflow-hidden", "[&[data-resizing=true]]:select-none", props.className ]), Halogen_HTML_Properties.attr("data-resizable-container")("true"), Halogen_HTML_Properties.attr("data-direction")(dirAttr), (function () {
            if (props.persistKey instanceof Data_Maybe.Just) {
                return Halogen_HTML_Properties.attr("data-persist-key")(props.persistKey.value0);
            };
            if (props.persistKey instanceof Data_Maybe.Nothing) {
                return Halogen_HTML_Properties.attr("data-persist-key")("");
            };
            throw new Error("Failed pattern match at Hydrogen.Interaction.Resizable (line 354, column 7 - line 356, column 63): " + [ props.persistKey.constructor.name ]);
        })() ])(children);
    };
};

// | Add custom class to container
var containerClassName = function (c) {
    return function (props) {
        return {
            direction: props.direction,
            onResizeStart: props.onResizeStart,
            onResize: props.onResize,
            onResizeEnd: props.onResizeEnd,
            onReset: props.onReset,
            persistKey: props.persistKey,
            keyboardStep: props.keyboardStep,
            className: props.className + (" " + c)
        };
    };
};

// | Enable collapse functionality
var collapsible = function (enabled) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsed: props.collapsed,
            onCollapse: props.onCollapse,
            className: props.className,
            collapsible: enabled
        };
    };
};

// | Set collapsed state
var collapsed = function (c) {
    return function (props) {
        return {
            id: props.id,
            defaultSize: props.defaultSize,
            minSize: props.minSize,
            maxSize: props.maxSize,
            flexGrow: props.flexGrow,
            collapsible: props.collapsible,
            onCollapse: props.onCollapse,
            className: props.className,
            collapsed: c
        };
    };
};
var collapsePanel = function (panel) {
    return function (dir) {
        return $foreign.collapsePanelImpl(panel)(directionToString(dir));
    };
};
var clearResizeState = $foreign.clearResizeStateImpl;
var clearPanelSizes = $foreign.clearPanelSizesImpl;
export {
    resizableContainer,
    resizablePanel,
    resizeHandle,
    direction,
    Horizontal,
    Vertical,
    onResizeStart,
    onResize,
    onResizeEnd,
    onReset,
    persistKey,
    keyboardStep,
    containerClassName,
    panelId,
    defaultSize,
    minSize,
    maxSize,
    flexGrow,
    collapsible,
    collapsed,
    onCollapse,
    panelClassName,
    handleClassName,
    collapsePanel,
    expandPanel,
    isPanelCollapsed,
    getPanelSize,
    setPanelSize,
    savePanelSizes,
    loadPanelSizes,
    clearPanelSizes,
    getResizeState,
    clearResizeState,
    eqDirection
};
