// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                      // hydrogen // hovercard
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | HoverCard component
// |
// | Rich hover previews that appear when hovering over a trigger element.
// | Similar to tooltips but can contain interactive content.
// |
// | ## Features
// |
// | - **Show on hover**: Opens when hovering over trigger
// | - **Configurable delays**: Open and close delays
// | - **Positioned content**: Like popover with side/alignment
// | - **Arrow pointing to trigger**: Visual connection to trigger
// | - **Keep open when hovering content**: Interactive content support
// | - **Close on escape**: Keyboard dismissal
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Primitive.HoverCard as HoverCard
// |
// | HoverCard.hoverCard []
// |   [ HoverCard.hoverCardTrigger []
// |       [ HH.a [ HP.href "#" ] [ HH.text "@username" ] ]
// |   , HoverCard.hoverCardContent [ HoverCard.side HoverCard.Bottom ]
// |       [ HoverCard.hoverCardArrow []
// |       , HH.div [ HP.class_ "flex gap-4" ]
// |           [ HH.img [ HP.src "avatar.jpg" ]
// |           , HH.div_
// |               [ HH.h4_ [ HH.text "User Name" ]
// |               , HH.p_ [ HH.text "Bio text here..." ]
// |               ]
// |           ]
// |       ]
// |   ]
// |
// | -- With custom delays
// | HoverCard.hoverCard
// |   [ HoverCard.openDelay 200
// |   , HoverCard.closeDelay 300
// |   ]
// |   [ ... ]
// | ```
import * as Data_Array from "../Data.Array/index.js";
import * as Data_Maybe from "../Data.Maybe/index.js";
import * as Data_Show from "../Data.Show/index.js";
import * as Halogen_HTML_Elements from "../Halogen.HTML.Elements/index.js";
import * as Halogen_HTML_Properties from "../Halogen.HTML.Properties/index.js";
import * as Halogen_HTML_Properties_ARIA from "../Halogen.HTML.Properties.ARIA/index.js";
import * as Hydrogen_UI_Core from "../Hydrogen.UI.Core/index.js";
var show = /* #__PURE__ */ Data_Show.show(Data_Show.showInt);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                        // side
// ═══════════════════════════════════════════════════════════════════════════════
// | Side positioning for the hover card
var Top = /* #__PURE__ */ (function () {
    function Top() {

    };
    Top.value = new Top();
    return Top;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                        // side
// ═══════════════════════════════════════════════════════════════════════════════
// | Side positioning for the hover card
var Right = /* #__PURE__ */ (function () {
    function Right() {

    };
    Right.value = new Right();
    return Right;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                        // side
// ═══════════════════════════════════════════════════════════════════════════════
// | Side positioning for the hover card
var Bottom = /* #__PURE__ */ (function () {
    function Bottom() {

    };
    Bottom.value = new Bottom();
    return Bottom;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                        // side
// ═══════════════════════════════════════════════════════════════════════════════
// | Side positioning for the hover card
var Left = /* #__PURE__ */ (function () {
    function Left() {

    };
    Left.value = new Left();
    return Left;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // align
// ═══════════════════════════════════════════════════════════════════════════════
// | Alignment along the side axis
var Start = /* #__PURE__ */ (function () {
    function Start() {

    };
    Start.value = new Start();
    return Start;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // align
// ═══════════════════════════════════════════════════════════════════════════════
// | Alignment along the side axis
var Center = /* #__PURE__ */ (function () {
    function Center() {

    };
    Center.value = new Center();
    return Center;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                       // align
// ═══════════════════════════════════════════════════════════════════════════════
// | Alignment along the side axis
var End = /* #__PURE__ */ (function () {
    function End() {

    };
    End.value = new End();
    return End;
})();

// | Data attribute value for side
var sideToString = function (v) {
    if (v instanceof Top) {
        return "top";
    };
    if (v instanceof Right) {
        return "right";
    };
    if (v instanceof Bottom) {
        return "bottom";
    };
    if (v instanceof Left) {
        return "left";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 104, column 16 - line 108, column 19): " + [ v.constructor.name ]);
};

// | CSS classes for side positioning
var sideClasses = function (v) {
    if (v instanceof Top) {
        return "bottom-full mb-2";
    };
    if (v instanceof Right) {
        return "left-full ml-2";
    };
    if (v instanceof Bottom) {
        return "top-full mt-2";
    };
    if (v instanceof Left) {
        return "right-full mr-2";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 96, column 15 - line 100, column 30): " + [ v.constructor.name ]);
};

// | Set hover card side (where it appears relative to trigger)
var side = function (s) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            side: s
        };
    };
};

// | Show arrow pointing to trigger
var showArrow = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            className: props.className,
            showArrow: enabled
        };
    };
};

// | Delay before opening (in milliseconds)
var openDelay = function (delay) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            openDelay: delay
        };
    };
};

// | Set open state (for controlled mode)
var open = function (o) {
    return function (props) {
        return {
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            open: o
        };
    };
};

// | Set open change handler
var onOpenChange = function (handler) {
    return function (props) {
        return {
            open: props.open,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            onOpenChange: new Data_Maybe.Just(handler)
        };
    };
};
var eqSide = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Top && y instanceof Top) {
                return true;
            };
            if (x instanceof Right && y instanceof Right) {
                return true;
            };
            if (x instanceof Bottom && y instanceof Bottom) {
                return true;
            };
            if (x instanceof Left && y instanceof Left) {
                return true;
            };
            return false;
        };
    }
};
var eqAlign = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Start && y instanceof Start) {
                return true;
            };
            if (x instanceof Center && y instanceof Center) {
                return true;
            };
            if (x instanceof End && y instanceof End) {
                return true;
            };
            return false;
        };
    }
};
var defaultProps = /* #__PURE__ */ (function () {
    return {
        open: false,
        onOpenChange: Data_Maybe.Nothing.value,
        side: Bottom.value,
        align: Center.value,
        openDelay: 700,
        closeDelay: 300,
        closeOnEscape: true,
        showArrow: true,
        className: ""
    };
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                  // components
// ═══════════════════════════════════════════════════════════════════════════════
// | HoverCard container
// |
// | Uses CSS group hover for uncontrolled behavior.
// | For controlled behavior, use the `open` prop.
var hoverCard = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "relative inline-block group", props.className ]), Halogen_HTML_Properties.attr("data-state")((function () {
            if (props.open) {
                return "open";
            };
            return "closed";
        })()), Halogen_HTML_Properties.attr("data-hover-card")("root"), Halogen_HTML_Properties.attr("data-open-delay")(show(props.openDelay)), Halogen_HTML_Properties.attr("data-close-delay")(show(props.closeDelay)), Halogen_HTML_Properties.attr("data-close-on-escape")((function () {
            if (props.closeOnEscape) {
                return "true";
            };
            return "false";
        })()) ])(children);
    };
};

// | HoverCard trigger element
// |
// | The element that shows the hover card on hover.
var hoverCardTrigger = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "inline-block", props.className ]), Halogen_HTML_Properties.attr("data-hover-card")("trigger") ])(children);
    };
};

// | Close hover card when Escape key is pressed
var closeOnEscape = function (enabled) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            showArrow: props.showArrow,
            className: props.className,
            closeOnEscape: enabled
        };
    };
};

// | Delay before closing (in milliseconds)
var closeDelay = function (delay) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            closeDelay: delay
        };
    };
};

// | Add custom class
var className = function (c) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            align: props.align,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className + (" " + c)
        };
    };
};

// ═══════════════════════════════════════════════════════════════════════════════
//                                                               // arrow classes
// ═══════════════════════════════════════════════════════════════════════════════
// | Arrow position classes based on hover card side
var arrowClasses = function (sd) {
    return function (al) {
        if (sd instanceof Top) {
            if (al instanceof Start) {
                return "bottom-0 left-4 translate-y-1/2 rotate-45";
            };
            if (al instanceof Center) {
                return "bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45";
            };
            if (al instanceof End) {
                return "bottom-0 right-4 translate-y-1/2 rotate-45";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 156, column 10 - line 159, column 59): " + [ al.constructor.name ]);
        };
        if (sd instanceof Bottom) {
            if (al instanceof Start) {
                return "top-0 left-4 -translate-y-1/2 rotate-45";
            };
            if (al instanceof Center) {
                return "top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 rotate-45";
            };
            if (al instanceof End) {
                return "top-0 right-4 -translate-y-1/2 rotate-45";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 160, column 13 - line 163, column 57): " + [ al.constructor.name ]);
        };
        if (sd instanceof Left) {
            if (al instanceof Start) {
                return "right-0 top-4 translate-x-1/2 rotate-45";
            };
            if (al instanceof Center) {
                return "right-0 top-1/2 -translate-y-1/2 translate-x-1/2 rotate-45";
            };
            if (al instanceof End) {
                return "right-0 bottom-4 translate-x-1/2 rotate-45";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 164, column 11 - line 167, column 59): " + [ al.constructor.name ]);
        };
        if (sd instanceof Right) {
            if (al instanceof Start) {
                return "left-0 top-4 -translate-x-1/2 rotate-45";
            };
            if (al instanceof Center) {
                return "left-0 top-1/2 -translate-y-1/2 -translate-x-1/2 rotate-45";
            };
            if (al instanceof End) {
                return "left-0 bottom-4 -translate-x-1/2 rotate-45";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 168, column 12 - line 171, column 59): " + [ al.constructor.name ]);
        };
        throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 155, column 22 - line 171, column 59): " + [ sd.constructor.name ]);
    };
};

// | HoverCard arrow
// |
// | Visual arrow pointing to the trigger element.
// | Position is automatically determined by side/align props.
var hoverCardArrow = function (propMods) {
    var props = Data_Array.foldl(function (p) {
        return function (f) {
            return f(p);
        };
    })(defaultProps)(propMods);
    return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute w-2 h-2 bg-popover border border-border", arrowClasses(props.side)(props.align), props.className ]), Halogen_HTML_Properties.attr("data-hover-card")("arrow") ])([  ]);
};

// | Data attribute value for alignment
var alignToString = function (v) {
    if (v instanceof Start) {
        return "start";
    };
    if (v instanceof Center) {
        return "center";
    };
    if (v instanceof End) {
        return "end";
    };
    throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 144, column 17 - line 147, column 18): " + [ v.constructor.name ]);
};

// | CSS classes for alignment (relative to side)
var alignClasses = function (sd) {
    return function (al) {
        if (sd instanceof Top) {
            if (al instanceof Start) {
                return "left-0";
            };
            if (al instanceof Center) {
                return "left-1/2 -translate-x-1/2";
            };
            if (al instanceof End) {
                return "right-0";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 125, column 10 - line 128, column 24): " + [ al.constructor.name ]);
        };
        if (sd instanceof Bottom) {
            if (al instanceof Start) {
                return "left-0";
            };
            if (al instanceof Center) {
                return "left-1/2 -translate-x-1/2";
            };
            if (al instanceof End) {
                return "right-0";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 129, column 13 - line 132, column 24): " + [ al.constructor.name ]);
        };
        if (sd instanceof Left) {
            if (al instanceof Start) {
                return "top-0";
            };
            if (al instanceof Center) {
                return "top-1/2 -translate-y-1/2";
            };
            if (al instanceof End) {
                return "bottom-0";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 133, column 11 - line 136, column 25): " + [ al.constructor.name ]);
        };
        if (sd instanceof Right) {
            if (al instanceof Start) {
                return "top-0";
            };
            if (al instanceof Center) {
                return "top-1/2 -translate-y-1/2";
            };
            if (al instanceof End) {
                return "bottom-0";
            };
            throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 137, column 12 - line 140, column 25): " + [ al.constructor.name ]);
        };
        throw new Error("Failed pattern match at Hydrogen.Primitive.HoverCard (line 124, column 22 - line 140, column 25): " + [ sd.constructor.name ]);
    };
};

// | HoverCard content
// |
// | The floating content panel that appears on hover.
// | Contains rich preview content.
var hoverCardContent = function (propMods) {
    return function (children) {
        var props = Data_Array.foldl(function (p) {
            return function (f) {
                return f(p);
            };
        })(defaultProps)(propMods);
        var visibilityClass = (function () {
            if (props.open) {
                return "opacity-100 visible scale-100";
            };
            return "opacity-0 invisible scale-95 group-hover:opacity-100 group-hover:visible group-hover:scale-100";
        })();
        return Halogen_HTML_Elements.div([ Hydrogen_UI_Core.cls([ "absolute z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none", "transition-all duration-200 ease-out", sideClasses(props.side), alignClasses(props.side)(props.align), visibilityClass, props.className ]), Halogen_HTML_Properties_ARIA.role("tooltip"), Halogen_HTML_Properties.attr("data-state")((function () {
            if (props.open) {
                return "open";
            };
            return "closed";
        })()), Halogen_HTML_Properties.attr("data-side")(sideToString(props.side)), Halogen_HTML_Properties.attr("data-align")(alignToString(props.align)), Halogen_HTML_Properties.attr("data-hover-card")("content") ])(children);
    };
};

// | Set alignment along the side
var align = function (a) {
    return function (props) {
        return {
            open: props.open,
            onOpenChange: props.onOpenChange,
            side: props.side,
            openDelay: props.openDelay,
            closeDelay: props.closeDelay,
            closeOnEscape: props.closeOnEscape,
            showArrow: props.showArrow,
            className: props.className,
            align: a
        };
    };
};
export {
    hoverCard,
    hoverCardTrigger,
    hoverCardContent,
    hoverCardArrow,
    open,
    onOpenChange,
    className,
    Top,
    Right,
    Bottom,
    Left,
    side,
    Start,
    Center,
    End,
    align,
    openDelay,
    closeDelay,
    closeOnEscape,
    showArrow,
    eqSide,
    eqAlign
};
