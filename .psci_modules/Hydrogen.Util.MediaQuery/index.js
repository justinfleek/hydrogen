// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
//                                                    // hydrogen // mediaquery
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// | Responsive media query utilities
// |
// | Type-safe wrappers around the matchMedia API for responsive design.
// |
// | ## Usage
// |
// | ```purescript
// | import Hydrogen.Util.MediaQuery as MQ
// |
// | -- Check current breakpoint
// | isMobile <- MQ.isMobile
// | isDesktop <- MQ.isDesktop
// |
// | -- Listen for changes
// | unsubscribe <- MQ.onMediaChange "(min-width: 768px)" \matches ->
// |   if matches
// |     then Console.log "Now on tablet or larger"
// |     else Console.log "Now on mobile"
// |
// | -- Detect user preferences
// | prefersDark <- MQ.prefersDarkMode
// | reducedMotion <- MQ.prefersReducedMotion
// |
// | -- Orientation
// | isLandscape <- MQ.isLandscape
// | ```
import * as $foreign from "./foreign.js";
import * as Data_Functor from "../Data.Functor/index.js";
import * as Data_HeytingAlgebra from "../Data.HeytingAlgebra/index.js";
import * as Data_Ordering from "../Data.Ordering/index.js";
import * as Effect from "../Effect/index.js";
var map = /* #__PURE__ */ Data_Functor.map(Effect.functorEffect);
var not = /* #__PURE__ */ Data_HeytingAlgebra.not(Data_HeytingAlgebra.heytingAlgebraBoolean);

// ═══════════════════════════════════════════════════════════════════════════════
//                                                         // breakpoint listeners
// ═══════════════════════════════════════════════════════════════════════════════
// | Breakpoint enumeration
var Mobile = /* #__PURE__ */ (function () {
    function Mobile() {

    };
    Mobile.value = new Mobile();
    return Mobile;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                         // breakpoint listeners
// ═══════════════════════════════════════════════════════════════════════════════
// | Breakpoint enumeration
var Tablet = /* #__PURE__ */ (function () {
    function Tablet() {

    };
    Tablet.value = new Tablet();
    return Tablet;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                         // breakpoint listeners
// ═══════════════════════════════════════════════════════════════════════════════
// | Breakpoint enumeration
var Desktop = /* #__PURE__ */ (function () {
    function Desktop() {

    };
    Desktop.value = new Desktop();
    return Desktop;
})();

// ═══════════════════════════════════════════════════════════════════════════════
//                                                         // breakpoint listeners
// ═══════════════════════════════════════════════════════════════════════════════
// | Breakpoint enumeration
var LargeDesktop = /* #__PURE__ */ (function () {
    function LargeDesktop() {

    };
    LargeDesktop.value = new LargeDesktop();
    return LargeDesktop;
})();
var showBreakpoint = {
    show: function (v) {
        if (v instanceof Mobile) {
            return "Mobile";
        };
        if (v instanceof Tablet) {
            return "Tablet";
        };
        if (v instanceof Desktop) {
            return "Desktop";
        };
        if (v instanceof LargeDesktop) {
            return "LargeDesktop";
        };
        throw new Error("Failed pattern match at Hydrogen.Util.MediaQuery (line 140, column 1 - line 144, column 37): " + [ v.constructor.name ]);
    }
};

// | Listen for media query changes
// |
// | Returns an unsubscribe function.
// |
// | ```purescript
// | unsubscribe <- onMediaChange "(prefers-color-scheme: dark)" \isDark ->
// |   applyTheme (if isDark then Dark else Light)
// | ```
var onMediaChange = $foreign.onMediaChangeImpl;

// | Listen for orientation changes
// |
// | Callback receives `true` for portrait, `false` for landscape.
var onOrientationChange = /* #__PURE__ */ onMediaChange("(orientation: portrait)");

// | Listen for color scheme changes
// |
// | ```purescript
// | unsubscribe <- onColorSchemeChange \isDark ->
// |   if isDark then applyDarkTheme else applyLightTheme
// | ```
var onColorSchemeChange = /* #__PURE__ */ onMediaChange("(prefers-color-scheme: dark)");

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                // core queries
// ═══════════════════════════════════════════════════════════════════════════════
// | Check if a media query matches
// |
// | ```purescript
// | matches <- matchMedia "(min-width: 768px)"
// | ```
var matchMedia = $foreign.matchMediaImpl;

// | Check if user prefers high contrast
var prefersContrast = /* #__PURE__ */ matchMedia("(prefers-contrast: more)");

// ═══════════════════════════════════════════════════════════════════════════════
//                                                          // user preferences
// ═══════════════════════════════════════════════════════════════════════════════
// | Check if user prefers dark color scheme
var prefersDarkMode = /* #__PURE__ */ matchMedia("(prefers-color-scheme: dark)");

// | Check if user prefers light color scheme
var prefersLightMode = /* #__PURE__ */ matchMedia("(prefers-color-scheme: light)");

// | Check if user prefers reduced motion
// |
// | Important for accessibility - disable animations when true.
var prefersReducedMotion = /* #__PURE__ */ matchMedia("(prefers-reduced-motion: reduce)");

// | Check if user prefers reduced transparency
var prefersReducedTransparency = /* #__PURE__ */ matchMedia("(prefers-reduced-transparency: reduce)");

// | Check if device supports touch
// |
// | Note: This is a heuristic based on media queries.
var isTouch = /* #__PURE__ */ matchMedia("(hover: none) and (pointer: coarse)");

// | Check if viewport is tablet (>= 768px and < 1024px)
var isTablet = function __do() {
    var above768 = matchMedia("(min-width: 768px)")();
    var below1024 = map(not)(matchMedia("(min-width: 1024px)"))();
    return above768 && below1024;
};

// | Check if currently printing
var isPrint = /* #__PURE__ */ matchMedia("print");

// ═══════════════════════════════════════════════════════════════════════════════
//                                                                 // orientation
// ═══════════════════════════════════════════════════════════════════════════════
// | Check if device is in portrait orientation
var isPortrait = /* #__PURE__ */ matchMedia("(orientation: portrait)");

// ═══════════════════════════════════════════════════════════════════════════════
//                                                           // breakpoint helpers
// ═══════════════════════════════════════════════════════════════════════════════
// | Standard breakpoints (following Tailwind conventions)
// | sm: 640px, md: 768px, lg: 1024px, xl: 1280px, 2xl: 1536px
// | Check if viewport is mobile (< 768px)
var isMobile = /* #__PURE__ */ map(not)(/* #__PURE__ */ matchMedia("(min-width: 768px)"));

// | Check if viewport is large desktop (>= 1280px)
var isLargeDesktop = /* #__PURE__ */ matchMedia("(min-width: 1280px)");

// | Check if device is in landscape orientation
var isLandscape = /* #__PURE__ */ matchMedia("(orientation: landscape)");

// ═══════════════════════════════════════════════════════════════════════════════
//                                                             // display features
// ═══════════════════════════════════════════════════════════════════════════════
// | Check if display is high DPI (retina)
var isHighDPI = /* #__PURE__ */ matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)");

// | Check if viewport is desktop (>= 1024px)
var isDesktop = /* #__PURE__ */ matchMedia("(min-width: 1024px)");
var eqBreakpoint = {
    eq: function (x) {
        return function (y) {
            if (x instanceof Mobile && y instanceof Mobile) {
                return true;
            };
            if (x instanceof Tablet && y instanceof Tablet) {
                return true;
            };
            if (x instanceof Desktop && y instanceof Desktop) {
                return true;
            };
            if (x instanceof LargeDesktop && y instanceof LargeDesktop) {
                return true;
            };
            return false;
        };
    }
};
var ordBreakpoint = {
    compare: function (x) {
        return function (y) {
            if (x instanceof Mobile && y instanceof Mobile) {
                return Data_Ordering.EQ.value;
            };
            if (x instanceof Mobile) {
                return Data_Ordering.LT.value;
            };
            if (y instanceof Mobile) {
                return Data_Ordering.GT.value;
            };
            if (x instanceof Tablet && y instanceof Tablet) {
                return Data_Ordering.EQ.value;
            };
            if (x instanceof Tablet) {
                return Data_Ordering.LT.value;
            };
            if (y instanceof Tablet) {
                return Data_Ordering.GT.value;
            };
            if (x instanceof Desktop && y instanceof Desktop) {
                return Data_Ordering.EQ.value;
            };
            if (x instanceof Desktop) {
                return Data_Ordering.LT.value;
            };
            if (y instanceof Desktop) {
                return Data_Ordering.GT.value;
            };
            if (x instanceof LargeDesktop && y instanceof LargeDesktop) {
                return Data_Ordering.EQ.value;
            };
            throw new Error("Failed pattern match at Hydrogen.Util.MediaQuery (line 0, column 0 - line 0, column 0): " + [ x.constructor.name, y.constructor.name ]);
        };
    },
    Eq0: function () {
        return eqBreakpoint;
    }
};

// | Get the current breakpoint
var currentBreakpoint = function __do() {
    var xl = matchMedia("(min-width: 1280px)")();
    var lg = matchMedia("(min-width: 1024px)")();
    var md = matchMedia("(min-width: 768px)")();
    if (xl) {
        return LargeDesktop.value;
    };
    if (lg) {
        return Desktop.value;
    };
    if (md) {
        return Tablet.value;
    };
    return Mobile.value;
};

// | Listen for breakpoint changes
// |
// | ```purescript
// | unsubscribe <- onBreakpointChange \bp ->
// |   case bp of
// |     Mobile -> enableMobileNav
// |     _ -> enableDesktopNav
// | ```
var onBreakpointChange = function (callback) {
    return function __do() {
        var unsub1 = onMediaChange("(min-width: 768px)")(function (v) {
            return function __do() {
                var bp = currentBreakpoint();
                return callback(bp)();
            };
        })();
        var unsub2 = onMediaChange("(min-width: 1024px)")(function (v) {
            return function __do() {
                var bp = currentBreakpoint();
                return callback(bp)();
            };
        })();
        var unsub3 = onMediaChange("(min-width: 1280px)")(function (v) {
            return function __do() {
                var bp = currentBreakpoint();
                return callback(bp)();
            };
        })();
        return function __do() {
            unsub1();
            unsub2();
            return unsub3();
        };
    };
};
export {
    matchMedia,
    onMediaChange,
    isMobile,
    isTablet,
    isDesktop,
    isLargeDesktop,
    onBreakpointChange,
    Mobile,
    Tablet,
    Desktop,
    LargeDesktop,
    currentBreakpoint,
    prefersDarkMode,
    prefersLightMode,
    prefersReducedMotion,
    prefersReducedTransparency,
    prefersContrast,
    onColorSchemeChange,
    isPortrait,
    isLandscape,
    onOrientationChange,
    isHighDPI,
    isTouch,
    isPrint,
    eqBreakpoint,
    ordBreakpoint,
    showBreakpoint
};
